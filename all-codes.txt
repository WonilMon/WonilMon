===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\.gitignore =====
node_modules
.expo
.expo-shared
.env
.DS_Store


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\app.config.js =====
// app.config.js

export default {
  expo: {
    name: 'BandHand',
    slug: 'bandhand-app',
    version: '1.0.0',
    sdkVersion: '53.0.0',
    extra: {
    },
    ios: {
      infoPlist: {
        NSPhotoLibraryUsageDescription:
          'ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã‚’é¸æŠã™ã‚‹ãŸã‚ã«ãƒ•ã‚©ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒå¿…è¦ã§ã™ã€‚',
      },
    },
  },
};


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\App.js =====
// App.js
import React from 'react';
import RootNavigator from './src/navigation/AuthStack';

export default function App() {
  return <RootNavigator />;
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\app.json =====
{
  "expo": {
    "name": "bandhand",
    "slug": "snack-164f8f59-1ff8-48f5-b109-ae8ba0d00cda",
    "version": "1.0.0",
    "orientation": "portrait",
    "icon": "./assets/icon.png",
    "userInterfaceStyle": "light",
    "newArchEnabled": true,
    "splash": {
      "image": "./assets/splash-icon.png",
      "resizeMode": "contain",
      "backgroundColor": "#ffffff"
    },
    "ios": {
      "supportsTablet": true
    },
    "android": {
      "adaptiveIcon": {
        "foregroundImage": "./assets/adaptive-icon.png",
        "backgroundColor": "#ffffff"
      },
      "edgeToEdgeEnabled": true
    },
    "web": {
      "favicon": "./assets/favicon.png"
    }
  }
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\index.js =====
import { registerRootComponent } from 'expo';

import App from './App';

// registerRootComponent calls AppRegistry.registerComponent('main', () => App);
// It also ensures that whether you load the app in Expo Go or in a native build,
// the environment is set up appropriately
registerRootComponent(App);


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\package.json =====
{
  "license": "0BSD",
  "main": "index.js",
  "scripts": {
    "start": "expo start",
    "android": "expo start --android",
    "ios": "expo start --ios",
    "web": "expo start --web"
  },
  "dependencies": {
    "expo": "~53.0.12",
    "expo-status-bar": "~2.2.3",
    "react": "19.0.0",
    "react-native": "0.79.4",
    "@react-native-async-storage/async-storage": "2.1.2",
    "@react-native-community/datetimepicker": "8.3.0",
    "@react-native-picker/picker": "2.11.0",
    "@react-navigation/drawer": "^7.4.1",
    "@react-navigation/native": "^7.1.10",
    "@react-navigation/native-stack": "^7.3.14",
    "@react-navigation/stack": "^7.3.3",
    "@supabase/supabase-js": "^2.49.9",
    "date-fns": "*",
    "expo-image-picker": "~16.1.4",
    "react-native-gesture-handler": "~2.24.0",
    "react-native-modal-datetime-picker": "^18.0.0",
    "react-native-picker-select": "^9.3.1",
    "react-native-reanimated": "~3.17.4",
    "react-native-safe-area-context": "5.4.0",
    "react-native-screens": "~4.11.1",
    "react-native-vector-icons": "*",
    "zustand": "^5.0.5",
    "expo-constants": "~17.1.6",
    "immer": "9.0.21",
    "@types/react": "18.2.47",
    "use-sync-external-store": "1.2.0"
  },
  "devDependencies": {
    "@babel/core": "^7.20.0"
  },
  "private": true
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\api\auth.js =====
// src/api/auth.js
import { supabase } from './supabaseClient';

export async function signUp(email, password) {
  const { data, error } = await supabase.auth.signUp({ email, password });
  return { data, error };
}

export async function signIn(email, password) {
  try {
    console.log('ğŸ“© Signing in with:', email, password);

    const { data, error } = await supabase.auth.signInWithPassword({
      email,
      password,
    });

    console.log('ğŸ“¬ signIn result data:', data);
    console.log('ğŸ“¬ signIn result error:', error);

    return { data, error };
  } catch (err) {
    console.log('âŒ signIn exception:', err);
    return { data: null, error: err };
  }
}

export async function signOut() {
  const { error } = await supabase.auth.signOut();
  return { error };
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\api\comments.js =====
// src/api/comments.js
import { supabase } from './supabaseClient';

export const fetchCommentsForUser = async (toUserId) => {
  const { data, error } = await supabase
    .from('comments')
    .select('*, from_user_id(*)')
    .eq('to_user_id', toUserId)
    .order('created_at', { ascending: false });

  if (error) throw error;
  return data;
};

export const postComment = async (fromUserId, toUserId, content) => {
  const { data, error } = await supabase.from('comments').insert([
    {
      from_user_id: fromUserId,
      to_user_id: toUserId,
      content,
    },
  ]);

  if (error) throw error;
  return data;
};


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\api\supabaseClient.js =====
// src/api/supabaseClient.js

// import { createClient } from '@supabase/supabase-js';
// import Constants from 'expo-constants';

// const { SUPABASE_URL, SUPABASE_ANON_KEY } = Constants.expoConfig.extra;

// console.log('âœ… SUPABASE_URL:', SUPABASE_URL);

// export const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

import { createClient } from '@supabase/supabase-js';
import Constants from 'expo-constants';


const supabaseUrl = "???";
const supabaseAnonKey = "???";


export const supabase = createClient(supabaseUrl, supabaseAnonKey);


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\components\forms\CheckBoxGroup.js =====
import React from 'react';
import { View, Text, TouchableOpacity } from 'react-native';
import { commonStyles } from '../../styles/common';

export default function CheckBoxGroup({
  label,
  options = [],
  selected = [],
  onChange,
  singleSelect = false,
}) {
  const toggleOption = (item) => {
    if (singleSelect) {
      onChange([item]);
    } else {
      onChange(
        selected.includes(item)
          ? selected.filter((val) => val !== item)
          : [...selected, item],
      );
    }
  };

  return (
    <View style={commonStyles.formGroup}>
      {label && <Text style={commonStyles.label}>{label}</Text>}
      <View style={commonStyles.row}>
        {options.map((item) => (
          <TouchableOpacity
            key={item}
            style={[
              commonStyles.checkBox,
              selected.includes(item) && commonStyles.checkBoxSelected,
            ]}
            onPress={() => toggleOption(item)}
            activeOpacity={0.7}
          >
            <Text
              style={[
                commonStyles.checkBoxText,
                selected.includes(item) && commonStyles.checkBoxTextSelected,
              ]}
            >
              {item}
            </Text>
          </TouchableOpacity>
        ))}
      </View>
    </View>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\components\forms\CommentList.js =====
import React, { useEffect, useState } from 'react';
import { View, Text, TextInput, TouchableOpacity, FlatList } from 'react-native';
import { supabase } from '../../api/supabaseClient';
import { useAuthStore } from '../../store/useAuthStore';
import { format } from 'date-fns';
import { ja } from 'date-fns/locale';
import { commonStyles } from '../../styles/common';
import CommentItem from '../ui/CommentItem';
import Button from '../ui/Button';

export default function CommentList({ to_user_id }) {
  const user = useAuthStore((state) => state.user);
  const [comments, setComments] = useState([]);
  const [newComment, setNewComment] = useState('');
  const [limit, setLimit] = useState(10);

  useEffect(() => {
    fetchComments();
  }, [limit]);

  const fetchComments = async () => {
    const { data } = await supabase
      .from('comments')
      .select('*, from_user_id!inner(nickname, avatar_url)')
      .eq('to_user_id', to_user_id)
      .order('created_at', { ascending: false })
      .limit(limit);
    if (data) setComments(data);
  };

  const handleSubmit = async () => {
    if (!newComment.trim()) return;

    const { data: inserted, error } = await supabase
      .from('comments')
      .insert({
        from_user_id: user.id,
        to_user_id,
        content: newComment,
      })
      .select()
      .single();

    if (!error && inserted) {
      await supabase.from('notifications').insert({
        user_id: to_user_id,
        type: 'comment',
        reference_id: inserted.id,
      });
      setNewComment('');
      fetchComments();
    }
  };

  return (
    <View style={commonStyles.card}>
      <Text style={commonStyles.sectionTitle}>ğŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆ</Text>
      {comments.length === 0 && (
        <Text style={commonStyles.textMuted}>ã¾ã ã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã‚Šã¾ã›ã‚“</Text>
      )}
      <FlatList
        data={comments}
        keyExtractor={(item) => item.id.toString()}
        renderItem={({ item }) => (
          <CommentItem
            avatar={item.from_user_id.avatar_url}
            nickname={item.from_user_id.nickname}
            content={item.content}
            createdAt={item.created_at}
          />
        )}
      />
      {comments.length >= limit && (
        <Button title="ã•ã‚‰ã«è¡¨ç¤º" onPress={() => setLimit((prev) => prev + 10)} />
      )}
      <View style={commonStyles.row}>
        <TextInput
          style={[commonStyles.input, { flex: 1 }]}
          placeholder="ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ›..."
          value={newComment}
          onChangeText={setNewComment}
        />
        <Button title="æŠ•ç¨¿" onPress={handleSubmit} />
      </View>
    </View>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\components\forms\DropdownSelector.js =====
import React from 'react';
import { View, Text } from 'react-native';
import { Picker } from '@react-native-picker/picker';
import { commonStyles } from '../../styles/common';

export default function DropdownSelector({
  label,
  options = [],
  selected,
  onSelect,
}) {
  return (
    <View style={commonStyles.formGroup}>
      {label && <Text style={commonStyles.label}>{label}</Text>}
      <View style={commonStyles.dropdownWrapper}>
        <Picker
          selectedValue={selected}
          onValueChange={onSelect}
          style={commonStyles.picker}
        >
          <Picker.Item label="é¸æŠã—ã¦ãã ã•ã„" value="" />
          {options.map((option) => (
            <Picker.Item key={option} label={option} value={option} />
          ))}
        </Picker>
      </View>
    </View>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\components\forms\UserFilterBar.js =====
import React from 'react';
import { View, Text, TextInput } from 'react-native';
import DropdownSelector from './DropdownSelector';
import Button from '../ui/Button';
import { commonStyles } from '../../styles/common';

const REGIONS = ['ã™ã¹ã¦', 'æ±äº¬', 'å¤§é˜ª', 'åå¤å±‹', 'ç¦å²¡'];
const PARTS = ['ãƒœãƒ¼ã‚«ãƒ«', 'ã‚®ã‚¿ãƒ¼', 'ãƒ™ãƒ¼ã‚¹', 'ãƒ‰ãƒ©ãƒ ', 'ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰'];

export default function UserFilterBar({
  sortBy,
  setSortBy,
  region,
  setRegion,
  minAge,
  maxAge,
  setMinAge,
  setMaxAge,
  partFilter,
  setPartFilter,
}) {
  return (
    <View style={commonStyles.card}>
      <View style={commonStyles.row}>
        <Text style={commonStyles.label}>ä¸¦ã³æ›¿ãˆ:</Text>
        <Button
          title="åå‰é †"
          onPress={() => setSortBy('name')}
          style={sortBy === 'name' && commonStyles.buttonSelected}
        />
        <Button
          title="ã„ã„ã­é †"
          onPress={() => setSortBy('likes')}
          style={sortBy === 'likes' && commonStyles.buttonSelected}
        />
      </View>
      <DropdownSelector
        label="åœ°åŸŸ"
        options={REGIONS}
        selected={region}
        onSelect={setRegion}
      />
      <View style={commonStyles.row}>
        <Text style={commonStyles.label}>å¹´é½¢:</Text>
        <TextInput
          style={[commonStyles.input, { flex: 1 }]}
          keyboardType="number-pad"
          value={minAge?.toString() || ''}
          onChangeText={(v) => setMinAge(Number(v))}
          placeholder="æœ€å°"
        />
        <TextInput
          style={[commonStyles.input, { flex: 1 }]}
          keyboardType="number-pad"
          value={maxAge?.toString() || ''}
          onChangeText={(v) => setMaxAge(Number(v))}
          placeholder="æœ€å¤§"
        />
      </View>
      <DropdownSelector
        label="ãƒ‘ãƒ¼ãƒˆ"
        options={PARTS}
        selected={partFilter}
        onSelect={setPartFilter}
      />
    </View>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\components\ui\BackFAB.js =====
import React from 'react';
import { TouchableOpacity, Text } from 'react-native';
import { useNavigation } from '@react-navigation/native';
import { commonStyles } from '../../styles/common';

export default function BackFAB({ onPress }) {
  const navigation = useNavigation();

  const handlePress = () => {
    if (onPress) {
      onPress();
    } else if (navigation.canGoBack()) {
      navigation.goBack();
    }
  };

  return (
    <TouchableOpacity style={commonStyles.fab} onPress={handlePress} activeOpacity={0.8}>
      <Text style={commonStyles.fabText}>â† æˆ»ã‚‹</Text>
    </TouchableOpacity>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\components\ui\Button.js =====
import React from 'react';
import { TouchableOpacity, Text } from 'react-native';
import { commonStyles } from '../../styles/common';

export default function Button({ title, onPress, style }) {
  return (
    <TouchableOpacity style={[commonStyles.button, style]} onPress={onPress} activeOpacity={0.8}>
      <Text style={commonStyles.buttonText}>{title}</Text>
    </TouchableOpacity>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\components\ui\CommentItem.js =====
import React from 'react';
import { View, Text, Image } from 'react-native';
import { commonStyles } from '../../styles/common';

export default function CommentItem({ avatar, nickname, content, createdAt }) {
  return (
    <View style={commonStyles.commentItem}>
      <Image
        source={{ uri: avatar }}
        style={commonStyles.commentAvatar}
      />
      <View style={{ flex: 1 }}>
        <Text style={commonStyles.commentNickname}>{nickname}</Text>
        <Text style={commonStyles.commentContent}>{content}</Text>
        <Text style={commonStyles.commentDate}>
          {new Date(createdAt).toLocaleString('ja-JP')}
        </Text>
      </View>
    </View>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\components\ui\LikeButton.js =====
import React, { useEffect, useState } from 'react';
import { Text, TouchableOpacity, Alert } from 'react-native';
import { useAuthStore } from '../../store/useAuthStore';
import { supabase } from '../../api/supabaseClient';
import { commonStyles } from '../../styles/common';

export default function LikeButton({ to_user_id }) {
  const user = useAuthStore((state) => state.user);
  const [hasLiked, setHasLiked] = useState(false);
  const [count, setCount] = useState(0);

  useEffect(() => {
    checkLiked();
    fetchCount();
  }, []);

  const checkLiked = async () => {
    const { data } = await supabase
      .from('likes')
      .select()
      .eq('from_user_id', user.id)
      .eq('to_user_id', to_user_id);
    if (data.length > 0) setHasLiked(true);
  };

  const fetchCount = async () => {
    const { count } = await supabase
      .from('likes')
      .select('*', { count: 'exact', head: true })
      .eq('to_user_id', to_user_id);
    setCount(count || 0);
  };

  const handleLike = async () => {
    if (user.id === to_user_id) {
      Alert.alert('ğŸ˜…', 'è‡ªåˆ†ã«ã¯ã€Œã„ã„ã­ã€ã§ãã¾ã›ã‚“');
      return;
    }
    if (hasLiked) {
      Alert.alert('ğŸ‘', 'æ—¢ã«ã€Œã„ã„ã­ã€ã—ã¾ã—ãŸ');
      return;
    }

    const { error } = await supabase.from('likes').insert({
      from_user_id: user.id,
      to_user_id,
    });

    if (!error) {
      await supabase.from('notifications').insert({
        user_id: to_user_id,
        type: 'like',
        reference_id: user.id,
      });
      setHasLiked(true);
      setCount((prev) => prev + 1);
    }
  };

  return (
    <TouchableOpacity
      onPress={handleLike}
      style={[
        commonStyles.likeButton,
        hasLiked && commonStyles.likeButtonActive,
      ]}
      activeOpacity={0.8}
    >
      <Text style={commonStyles.likeButtonText}>
        â¤ï¸ ã„ã„ã­æ•°: {count}
      </Text>
    </TouchableOpacity>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\components\ui\ProfileImage.js =====
import React from 'react';
import { Image, View, Text, TouchableOpacity } from 'react-native';
import { commonStyles } from '../../styles/common';

export default function ProfileImage({ uri, size = 80, onPress }) {
  const content = uri ? (
    <Image
      source={{ uri }}
      style={[commonStyles.profileImage, { width: size, height: size, borderRadius: size / 2 }]}
    />
  ) : (
    <View
      style={[
        commonStyles.profileImage,
        { width: size, height: size, borderRadius: size / 2, backgroundColor: '#eee' },
      ]}
    >
      <Text style={commonStyles.profileImagePlaceholder}>ç”»åƒ</Text>
    </View>
  );

  if (onPress) {
    return (
      <TouchableOpacity onPress={onPress} activeOpacity={0.7}>
        {content}
      </TouchableOpacity>
    );
  }
  return content;
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\components\ui\ProfileItem.js =====
import React from 'react';
import { View, Text } from 'react-native';
import { commonStyles } from '../../styles/common';

export default function ProfileItem({ label, value, multiline = false }) {
  return (
    <View style={commonStyles.profileItem}>
      <Text style={commonStyles.label}>{label}</Text>
      <View style={commonStyles.profileValueWrapper}>
        <Text style={[commonStyles.profileValue, multiline && { flexWrap: 'wrap' }]}>{value}</Text>
      </View>
    </View>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\components\ui\ReadOnlyTagGroup.js =====
import React from 'react';
import { View, Text } from 'react-native';
import { commonStyles } from '../../styles/common';

export default function ReadOnlyTagGroup({ title, items = [] }) {
  return (
    <View style={commonStyles.readOnlyTagGroup}>
      <Text style={commonStyles.label}>{title}</Text>
      <View style={commonStyles.row}>
        {items.map((item) => (
          <View key={item} style={commonStyles.tag}>
            <Text style={commonStyles.tagText}>{item}</Text>
          </View>
        ))}
      </View>
    </View>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\components\ui\SectionTitle.js =====
import React from 'react';
import { Text } from 'react-native';
import { commonStyles } from '../../styles/common';

export default function SectionTitle({ title }) {
  return <Text style={commonStyles.sectionTitle}>{title}</Text>;
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\constants\days.js =====
// src/constants/days.js

export const DAYS = ['æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ', 'æ—¥'];


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\constants\directions.js =====
// src/constants/directions.js
export const DIRECTIONS = [
  'ã‚ªãƒªã‚¸ãƒŠãƒ«',
  'ã‚³ãƒ”ãƒ¼',
  'ãƒ—ãƒ­å¿—å‘',
  'ã‚¢ãƒãƒãƒ¥ã‚¢',
  'ãƒ©ã‚¤ãƒ–ä¸­å¿ƒ',
  'ãƒ¬ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç›®çš„',
  'YouTubeæ´»å‹•',
];


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\constants\genders.js =====
// src/constants/genders.js

export const GENDERS = ['ç”·æ€§', 'å¥³æ€§', 'ä¸å•'];


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\constants\genres.js =====
// src/constants/genres.js
export const GENRES = [
  'J-POP',
  'ãƒ­ãƒƒã‚¯',
  'ãƒãƒƒãƒ—ã‚¹',
  'ã‚¸ãƒ£ã‚º',
  'ãƒ¡ã‚¿ãƒ«',
  'ãƒ’ãƒƒãƒ—ãƒ›ãƒƒãƒ—',
  'ã‚¢ãƒ‹ãƒ¡ã‚½ãƒ³ã‚°',
  'ãƒœã‚«ãƒ­',
  'R&B',
  'EDM',
  'ã‚¯ãƒ©ã‚·ãƒƒã‚¯',
  'ã‚¢ã‚¤ãƒ‰ãƒ«',
  'ãƒ‘ãƒ³ã‚¯',
  'ãƒ–ãƒ«ãƒ¼ã‚¹',
  'ãƒ•ã‚¡ãƒ³ã‚¯',
  'ãƒ¬ã‚²ã‚¨',
  'ã‚µãƒ¼ãƒ•ãƒŸãƒ¥ãƒ¼ã‚¸ãƒƒã‚¯',
  'ã‚·ãƒ†ã‚£ãƒãƒƒãƒ—',
  'æ˜­å’Œæ­Œè¬¡',
  'ã‚ªãƒ«ã‚¿ãƒŠãƒ†ã‚£ãƒ–',
];


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\constants\parts.js =====
// src/constants/parts.js
export const PARTS = [
  'ãƒœãƒ¼ã‚«ãƒ«',
  'ã‚®ã‚¿ãƒ¼',
  'ãƒ™ãƒ¼ã‚¹',
  'ãƒ‰ãƒ©ãƒ ',
  'ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰',
  'DTM',
  'ä½œè©',
  'ä½œæ›²',
  'ç·¨æ›²',
  'ãƒŸã‚­ã‚·ãƒ³ã‚°',
  'ãƒ—ãƒ­ãƒ‡ãƒ¥ãƒ¼ã‚¹',
  'ãã®ä»–',
];


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\constants\prefectures.js =====
// src/constants/prefectures.js
export const PREFECTURES = [
  'åŒ—æµ·é“',
  'é’æ£®çœŒ',
  'å²©æ‰‹çœŒ',
  'å®®åŸçœŒ',
  'ç§‹ç”°çœŒ',
  'å±±å½¢çœŒ',
  'ç¦å³¶çœŒ',
  'èŒ¨åŸçœŒ',
  'æ ƒæœ¨çœŒ',
  'ç¾¤é¦¬çœŒ',
  'åŸ¼ç‰çœŒ',
  'åƒè‘‰çœŒ',
  'æ±äº¬éƒ½',
  'ç¥å¥ˆå·çœŒ',
  'æ–°æ½ŸçœŒ',
  'å¯Œå±±çœŒ',
  'çŸ³å·çœŒ',
  'ç¦äº•çœŒ',
  'å±±æ¢¨çœŒ',
  'é•·é‡çœŒ',
  'å²é˜œçœŒ',
  'é™å²¡çœŒ',
  'æ„›çŸ¥çœŒ',
  'ä¸‰é‡çœŒ',
  'æ»‹è³€çœŒ',
  'äº¬éƒ½åºœ',
  'å¤§é˜ªåºœ',
  'å…µåº«çœŒ',
  'å¥ˆè‰¯çœŒ',
  'å’Œæ­Œå±±çœŒ',
  'é³¥å–çœŒ',
  'å³¶æ ¹çœŒ',
  'å²¡å±±çœŒ',
  'åºƒå³¶çœŒ',
  'å±±å£çœŒ',
  'å¾³å³¶çœŒ',
  'é¦™å·çœŒ',
  'æ„›åª›çœŒ',
  'é«˜çŸ¥çœŒ',
  'ç¦å²¡çœŒ',
  'ä½è³€çœŒ',
  'é•·å´çœŒ',
  'ç†Šæœ¬çœŒ',
  'å¤§åˆ†çœŒ',
  'å®®å´çœŒ',
  'é¹¿å…å³¶çœŒ',
  'æ²–ç¸„çœŒ',
];


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\hooks\useUnreadNotifications.js =====
//src/hooks/useUnredNotifications.js

import { useEffect, useState } from 'react';
import { supabase } from '../api/supabaseClient';
import { useAuthStore } from '../store/useAuthStore';

export function useUnreadNotifications() {
  const [count, setCount] = useState(0);
  const [isLoading, setIsLoading] = useState(true);
  const user = useAuthStore((state) => state.user);

  useEffect(() => {
    if (user?.id) {
      fetchUnreadCount();
    }
  }, [user]);

  const fetchUnreadCount = async () => {
    setIsLoading(true);
    const { count, error } = await supabase
      .from('notifications')
      .select('*', { count: 'exact', head: true })
      .eq('user_id', user.id)
      .eq('read', false);
    if (!error) setCount(count);
    setIsLoading(false);
  };

  return { count, isLoading };
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\modals\BandPostModal.js =====
import React, { useState, useEffect } from 'react';
import {
  Modal,
  View,
  Text,
  TextInput,
  TouchableOpacity,
  Alert,
  ScrollView,
  Switch,
  KeyboardAvoidingView,
  Platform,
  TouchableWithoutFeedback,
  Keyboard,
} from 'react-native';
import { supabase } from '../api/supabaseClient';
import { useAuthStore } from '../store/useAuthStore';
import { PARTS } from '../constants/parts';
import { GENRES } from '../constants/genres';
import { PREFECTURES } from '../constants/prefectures';
import { DAYS } from '../constants/days';
import { DIRECTIONS } from '../constants/directions';
import { GENDERS } from '../constants/genders';

import CheckBoxGroup from '../components/forms/CheckBoxGroup';
import DropdownSelector from '../components/forms/DropdownSelector';

export default function BandPostModal({
  visible,
  onClose,
  onPostCreated,
  mode = 'create',
  initialData = {},
}) {
  const user = useAuthStore((state) => state.user);
  const isEdit = mode === 'edit';

  const [title, setTitle] = useState('');
  const [region, setRegion] = useState('');
  const [description, setDescription] = useState('');
  const [selectedParts, setSelectedParts] = useState([]);
  const [selectedGenres, setSelectedGenres] = useState([]);
  const [isPublic, setIsPublic] = useState(true);
  const [postToX, setPostToX] = useState(false);
  const [activityDays, setActivityDays] = useState([]);
  const [directions, setDirections] = useState([]);
  const [gender, setGender] = useState('');
  const [ageMin, setAgeMin] = useState('');
  const [ageMax, setAgeMax] = useState('');
  const [isBeginnerOk, setIsBeginnerOk] = useState(false);
  const [demoUrl, setDemoUrl] = useState('');

  useEffect(() => {
    if (isEdit && initialData) {
      setTitle(initialData.title || '');
      setRegion(initialData.region || '');
      setDescription(initialData.description || '');
      setSelectedParts(initialData.parts || []);
      setSelectedGenres(initialData.genres || []);
      setIsPublic(initialData.is_public ?? true);
      setPostToX(initialData.post_to_x ?? false);
      setActivityDays(initialData.activity_days || []);
      setDirections(initialData.directions || []);
      setGender(initialData.gender || '');
      setAgeMin(initialData.age_range?.split('~')[0] || '');
      setAgeMax(initialData.age_range?.split('~')[1] || '');
      setIsBeginnerOk(initialData.is_beginner_ok ?? false);
      setDemoUrl(initialData.demo_url || '');
    } else {
      setTitle('');
      setRegion('');
      setDescription('');
      setSelectedParts([]);
      setSelectedGenres([]);
      setIsPublic(true);
      setPostToX(false);
      setActivityDays([]);
      setDirections([]);
      setGender('');
      setAgeMin('');
      setAgeMax('');
      setIsBeginnerOk(false);
      setDemoUrl('');
    }
  }, [visible]);

  const handleSubmit = async () => {
    if (
      !title ||
      !region ||
      !description ||
      selectedParts.length === 0 ||
      selectedGenres.length === 0
    ) {
      Alert.alert('ã™ã¹ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
      return;
    }

    const payload = {
      user_id: user.id,
      title,
      region,
      description,
      parts: selectedParts,
      genres: selectedGenres,
      is_public: isPublic,
      post_to_x: postToX,
      activity_days: activityDays,
      directions,
      gender,
      age_range: ageMin && ageMax ? `${ageMin}~${ageMax}` : '',
      is_beginner_ok: isBeginnerOk,
      demo_url: demoUrl,
    };

    if (isEdit) {
      const { error } = await supabase
        .from('band_posts')
        .update(payload)
        .eq('id', initialData.id);
      if (error) return Alert.alert('æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ', error.message);
    } else {
      const { error } = await supabase.from('band_posts').insert(payload);
      if (error) return Alert.alert('æŠ•ç¨¿ã«å¤±æ•—ã—ã¾ã—ãŸ', error.message);
    }

    onClose();
    onPostCreated();
  };

  return (
    <Modal visible={visible} animationType="slide" transparent>
      <KeyboardAvoidingView
        behavior={Platform.OS === 'ios' ? 'padding' : 'height'}
      >
        <TouchableWithoutFeedback onPress={Keyboard.dismiss}>
          <View>
            <ScrollView>
              <Text>
                {isEdit ? 'ğŸ“ æŠ•ç¨¿ã‚’ç·¨é›†' : 'âœï¸ æ–°è¦æŠ•ç¨¿'}
              </Text>

              <TextInput
                placeholder="ã‚¿ã‚¤ãƒˆãƒ«"
                value={title}
                onChangeText={setTitle}
              />

              <DropdownSelector
                label="åœ°åŸŸ"
                options={PREFECTURES}
                selected={region}
                onSelect={setRegion}
              />

              <CheckBoxGroup
                label="æ‹…å½“ãƒ‘ãƒ¼ãƒˆ"
                options={PARTS}
                selected={selectedParts}
                onChange={setSelectedParts}
              />

              <CheckBoxGroup
                label="ã‚¸ãƒ£ãƒ³ãƒ«"
                options={GENRES}
                selected={selectedGenres}
                onChange={setSelectedGenres}
              />

              <TextInput
                placeholder="å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
                value={description}
                onChangeText={setDescription}
                multiline
              />

              <CheckBoxGroup
                label="æ´»å‹•æ›œæ—¥"
                options={DAYS}
                selected={activityDays}
                onChange={setActivityDays}
              />

              <CheckBoxGroup
                label="æ´»å‹•ã‚¹ã‚¿ã‚¤ãƒ«"
                options={DIRECTIONS}
                selected={directions}
                onChange={setDirections}
              />

              <CheckBoxGroup
                label="å‹Ÿé›†æ€§åˆ¥"
                options={['ç”·æ€§', 'å¥³æ€§', 'ä¸å•']}
                selected={gender ? [gender] : []}
                onChange={(arr) => setGender(arr[0])}
              />

              <Text>å‹Ÿé›†å¹´é½¢</Text>
              <View>
                <TextInput
                  placeholder="æœ€ä½å¹´é½¢"
                  keyboardType="numeric"
                  value={ageMin}
                  onChangeText={setAgeMin}
                />
                <Text>ã€œ</Text>
                <TextInput
                  placeholder="æœ€é«˜å¹´é½¢"
                  keyboardType="numeric"
                  value={ageMax}
                  onChangeText={setAgeMax}
                />
              </View>

              <Text>å‚è€ƒURL</Text>
              <TextInput
                placeholder="Xãƒ»Instagramãƒ»DemoURLãªã©"
                value={demoUrl}
                onChangeText={setDemoUrl}
              />

              <View>
                <Text>åˆå¿ƒè€…OK</Text>
                <Switch value={isBeginnerOk} onValueChange={setIsBeginnerOk} />
              </View>

              <View>
                <Text>å…¬é–‹ã™ã‚‹</Text>
                <Switch value={isPublic} onValueChange={setIsPublic} />
              </View>

              <View>
                <Text>Xã«ã‚‚æŠ•ç¨¿</Text>
                <Switch value={postToX} onValueChange={setPostToX} />
              </View>

              <View>
                <TouchableOpacity onPress={onClose}>
                  <Text>é–‰ã˜ã‚‹</Text>
                </TouchableOpacity>
                <TouchableOpacity onPress={handleSubmit}>
                  <Text>{isEdit ? 'æ›´æ–°' : 'æŠ•ç¨¿'}</Text>
                </TouchableOpacity>
              </View>
            </ScrollView>
          </View>
        </TouchableWithoutFeedback>
      </KeyboardAvoidingView>
    </Modal>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\modals\GroupChatRoomModal.js =====
import React, { useState, useEffect } from 'react';
import {
  Modal, View, Text, TextInput,
  TouchableOpacity, Alert, Switch, KeyboardAvoidingView,
  Platform, TouchableWithoutFeedback, Keyboard, ScrollView,
} from 'react-native';
import { supabase } from '../api/supabaseClient';
import { useAuthStore } from '../store/useAuthStore';

export default function GroupChatRoomModal({
  visible,
  onClose,
  onCreated,
  initialData = {},
  mode = 'create',
}) {
  const user = useAuthStore((state) => state.user);
  const isEdit = mode === 'edit';

  const [name, setName] = useState('');
  const [description, setDescription] = useState('');
  const [password, setPassword] = useState('');
  const [isPublic, setIsPublic] = useState(true);
  const [maxMembers, setMaxMembers] = useState('50');
  const [notice, setNotice] = useState('');

  useEffect(() => {
    if (isEdit && initialData) {
      setName(initialData.name || '');
      setDescription(initialData.description || '');
      setPassword(initialData.password || '');
      setIsPublic(initialData.is_public ?? true);
      setMaxMembers(initialData.max_members?.toString() || '50');
      setNotice(initialData.notice || '');
    } else {
      setName('');
      setDescription('');
      setPassword('');
      setIsPublic(true);
      setMaxMembers('50');
      setNotice('');
    }
  }, [visible]);

  const handleSubmit = async () => {
    if (!name || !maxMembers) {
      Alert.alert('å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
      return;
    }
    const payload = {
      name,
      description,
      owner_id: user.id,
      password: password || null,
      is_public: isPublic,
      max_members: Number(maxMembers),
      notice,
    };
    let error;
    if (isEdit) {
      ({ error } = await supabase.from('group_chat_rooms').update(payload).eq('id', initialData.id));
    } else {
      ({ error } = await supabase.from('group_chat_rooms').insert(payload));
    }
    if (error) return Alert.alert('ãƒ«ãƒ¼ãƒ ã®ä½œæˆãƒ»ç·¨é›†ã«å¤±æ•—ã—ã¾ã—ãŸ', error.message);

    onClose();
    onCreated?.();
  };

  return (
    <Modal visible={visible} animationType="slide" transparent>
      <KeyboardAvoidingView
        behavior={Platform.OS === 'ios' ? 'padding' : 'height'}
      >
        <TouchableWithoutFeedback onPress={Keyboard.dismiss}>
          <View>
            <ScrollView>
              <Text>
                {isEdit ? 'ãƒ«ãƒ¼ãƒ ç·¨é›†' : 'ã‚°ãƒ«ãƒ¼ãƒ—ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ä½œæˆ'}
              </Text>
              <TextInput
                placeholder="ãƒ«ãƒ¼ãƒ å"
                value={name}
                onChangeText={setName}
                maxLength={24}
              />
              <TextInput
                placeholder="èª¬æ˜ (ä»»æ„)"
                value={description}
                onChangeText={setDescription}
                multiline
              />
              <TextInput
                placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ (ä»»æ„)"
                value={password}
                onChangeText={setPassword}
                secureTextEntry
              />
              <TextInput
                placeholder="æœ€å¤§äººæ•° (10~100)"
                value={maxMembers}
                onChangeText={setMaxMembers}
                keyboardType="numeric"
                maxLength={3}
              />
              <TextInput
                placeholder="ãƒ«ãƒ¼ãƒ ã®æ¡ˆå†…ãƒ»ãŠçŸ¥ã‚‰ã› (ä»»æ„)"
                value={notice}
                onChangeText={setNotice}
                multiline
              />

              <View>
                <Text>å…¬é–‹ãƒ«ãƒ¼ãƒ </Text>
                <Switch value={isPublic} onValueChange={setIsPublic} />
              </View>
              <View>
                <TouchableOpacity onPress={onClose}>
                  <Text>é–‰ã˜ã‚‹</Text>
                </TouchableOpacity>
                <TouchableOpacity onPress={handleSubmit}>
                  <Text>{isEdit ? 'ç·¨é›†' : 'ä½œæˆ'}</Text>
                </TouchableOpacity>
              </View>
            </ScrollView>
          </View>
        </TouchableWithoutFeedback>
      </KeyboardAvoidingView>
    </Modal>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\modals\NotificationsModal.js =====
import React, { useEffect, useState } from 'react';
import {
  View,
  Text,
  FlatList,
  TouchableOpacity,
  ActivityIndicator,
  KeyboardAvoidingView,
  TouchableWithoutFeedback,
  Keyboard,
  Modal,
  Platform,
} from 'react-native';
import { supabase } from '../api/supabaseClient';
import { useAuthStore } from '../store/useAuthStore';
import { useNavigation } from '@react-navigation/native';
import BackFAB from '../components/ui/BackFAB';
import { getNotificationMessage } from '../utils/notifications';

export default function NotificationsModal({
  visible,
  onClose,
  onProfileSelect,
}) {
  const user = useAuthStore((state) => state.user);
  const navigation = useNavigation();
  const [notifications, setNotifications] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    if (visible) {
      fetchNotifications();
    } else {
      setNotifications([]);
    }
  }, [visible]);

  const fetchNotifications = async () => {
    setLoading(true);
    try {
      const { data, error } = await supabase
        .from('notifications')
        .select(`*, from:users(id, nickname, avatar_url)`)
        .eq('user_id', user.id)
        .order('created_at', { ascending: false });

      if (!error) setNotifications(data || []);
    } finally {
      setLoading(false);
    }
  };

  const markAsRead = async (id) => {
    await supabase.from('notifications').update({ read: true }).eq('id', id);
    fetchNotifications();
  };

  const renderItem = ({ item }) => {
    const { type, read, from } = item;

    return (
      <TouchableOpacity
        onPress={() => {
          markAsRead(item.id);
          onProfileSelect?.(from);
        }}
      >
        <Text>
          {getNotificationMessage(type, from?.nickname)}
        </Text>
        <Text>
          {new Date(item.created_at).toLocaleString('ja-JP')}
        </Text>
      </TouchableOpacity>
    );
  };

  return (
    <Modal visible={visible} animationType="slide" transparent>
      <KeyboardAvoidingView
        behavior={Platform.OS === 'ios' ? 'padding' : 'height'}
      >
        <TouchableWithoutFeedback onPress={Keyboard.dismiss}>
          <View>
            <View>
              {loading ? (
                <ActivityIndicator size="large" />
              ) : (
                <FlatList
                  data={notifications}
                  keyExtractor={(item) => item.id.toString()}
                  renderItem={renderItem}
                  ListEmptyComponent={<Text>é€šçŸ¥ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“</Text>}
                />
              )}
            </View>
            <BackFAB onPress={onClose} />
          </View>
        </TouchableWithoutFeedback>
      </KeyboardAvoidingView>
    </Modal>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\modals\OnboardingModal.js =====
import React, { useState, useEffect } from 'react';
import {
  Modal,
  View,
  Text,
  TextInput,
  TouchableWithoutFeedback,
  Keyboard,
  Alert,
  TouchableOpacity,
  ScrollView,
  Image,
  Platform,
  ActivityIndicator,
  KeyboardAvoidingView,
} from 'react-native';
import DateTimePickerModal from 'react-native-modal-datetime-picker';
import { supabase } from '../api/supabaseClient';
import { useAuthStore } from '../store/useAuthStore';
import * as ImagePicker from 'expo-image-picker';
import Constants from 'expo-constants';
import CheckBoxGroup from '../components/forms/CheckBoxGroup';
import { PARTS } from '../constants/parts';
import { GENRES } from '../constants/genres';
import { PREFECTURES } from '../constants/prefectures';
import { format } from 'date-fns';
import { ja } from 'date-fns/locale';

export default function OnboardingModal({
  visible,
  onClose,
  initialProfile = {},
  mode = 'onboarding',
}) {
  const user = useAuthStore((state) => state.user);
  const [nickname, setNickname] = useState('');
  const [gender, setGender] = useState('');
  const [birthday, setBirthday] = useState('');
  const [showDatePicker, setShowDatePicker] = useState(false);
  const [region, setRegion] = useState(PREFECTURES[0]);
  const [parts, setParts] = useState([]);
  const [genres, setGenres] = useState([]);
  const [song, setSong] = useState('');
  const [meaning, setMeaning] = useState('');
  const [intro, setIntro] = useState('');
  const [selfIntro, setSelfIntro] = useState('');
  const [avatarUrl, setAvatarUrl] = useState('');
  const [avatar, setAvatar] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    if (visible) {
      setLoading(true);
      setTimeout(() => {
        if (initialProfile && Object.keys(initialProfile).length > 0) {
          applyInitialValues();
        }
        setLoading(false);
      }, 100);
    }
  }, [visible, initialProfile]);

  const applyInitialValues = () => {
    if (!initialProfile || Object.keys(initialProfile).length === 0) return;
    setNickname(initialProfile.nickname ?? '');
    setGender(initialProfile.gender ?? '');
    setBirthday(initialProfile.birthday ?? '');
    setRegion(initialProfile.region ?? PREFECTURES[0]);
    setParts(initialProfile.parts?.split(',') ?? []);
    setGenres(initialProfile.genres?.split(',') ?? []);
    setSong(initialProfile.song ?? '');
    setMeaning(initialProfile.meaning ?? '');
    setIntro(initialProfile.intro ?? '');
    setSelfIntro(initialProfile.self_intro ?? '');
    setAvatarUrl(initialProfile.avatar_url ?? '');
  };

  const pickImage = async () => {
    const permissionResult =
      await ImagePicker.requestMediaLibraryPermissionsAsync();
    if (!permissionResult.granted) {
      Alert.alert('ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦', 'ç”»åƒã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¦ãã ã•ã„ã€‚');
      return;
    }
    const result = await ImagePicker.launchImageLibraryAsync({
      mediaTypes: ImagePicker.MediaTypeOptions.Images,
      allowsEditing: true,
      quality: 0.7,
    });
    if (!result.canceled) {
      setAvatar(result.assets[0].uri);
    }
  };

  const handleDateConfirm = (date) => {
    setBirthday(format(date, 'yyyy-MM-dd', { locale: ja }));
    setShowDatePicker(false);
  };

  const handleSave = async () => {
    if (
      !nickname ||
      !gender ||
      !birthday ||
      !region ||
      parts.length === 0 ||
      !song ||
      !meaning ||
      !intro ||
      !selfIntro
    ) {
      Alert.alert('å…¨ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
      return;
    }
    if (
      song.length > 50 ||
      meaning.length > 50 ||
      intro.length > 50 ||
      selfIntro.length > 300
    ) {
      Alert.alert('å…¥åŠ›åˆ¶é™ã‚’è¶…ãˆã¾ã—ãŸã€‚');
      return;
    }

    let avatar_url = avatarUrl;
    if (avatar) {
      const ext = avatar.split('.').pop();
      const fileName = `${user.id}_${Date.now()}.${ext}`;
      const { error: uploadError } = await supabase.storage
        .from('avatars')
        .upload(`public/${fileName}`, {
          uri: avatar,
          type: 'image/jpeg',
          name: fileName,
        });
      if (uploadError) {
        Alert.alert('ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¤±æ•—', uploadError.message);
        return;
      }
      const { SUPABASE_URL } = Constants.expoConfig.extra;
      avatar_url = `${SUPABASE_URL}/storage/v1/object/public/avatars/public/${fileName}`;
    }

    const { data, error } = await supabase
      .from('users')
      .update({
        nickname,
        gender,
        birthday,
        region,
        parts: parts.join(','),
        genres: genres.join(','),
        song,
        meaning,
        intro,
        self_intro: selfIntro,
        avatar_url,
      })
      .eq('id', user.id)
      .select();

    if (error) {
      Alert.alert('ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚', error.message);
    } else if (!data || data.length === 0) {
      Alert.alert('æ›´æ–°ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚');
    } else {
      Alert.alert(
        mode === 'edit' ? 'å¤‰æ›´å®Œäº†' : 'ã‚ˆã†ã“ãï¼',
        'ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãŒä¿å­˜ã•ã‚Œã¾ã—ãŸã€‚',
      );
      onClose();
    }
  };

  if (loading) {
    return (
      <Modal visible={visible} transparent animationType="slide">
        <View>
          <ActivityIndicator size="large" />
        </View>
      </Modal>
    );
  }

  return (
    <Modal visible={visible} transparent animationType="slide">
      <KeyboardAvoidingView
        behavior={Platform.OS === 'ios' ? 'padding' : 'height'}
      >
        <TouchableWithoutFeedback onPress={Keyboard.dismiss}>
          <View>
            <ScrollView>
              <Text>
                {mode === 'edit' ? 'ğŸ›  ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†' : 'ğŸ‘‹ åˆã‚ã¾ã—ã¦ï¼'}
              </Text>
              {avatar ? (
                <Image source={{ uri: avatar }} />
              ) : avatarUrl ? (
                <Image source={{ uri: avatarUrl }} />
              ) : (
                <TouchableOpacity onPress={pickImage}>
                  <Text>ç”»åƒ</Text>
                </TouchableOpacity>
              )}

              <Text>ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ </Text>
              <TextInput
                value={nickname}
                onChangeText={setNickname}
                placeholder="ä¾‹: ãŸã‚ã†"
              />

              <Text>æ€§åˆ¥</Text>
              <View>
                {['ç”·æ€§', 'å¥³æ€§', 'æŒ‡å®šãªã—'].map((item) => (
                  <TouchableOpacity
                    key={item}
                    onPress={() => setGender(item)}
                  >
                    <Text>{item}</Text>
                  </TouchableOpacity>
                ))}
              </View>

              <Text>ç”Ÿå¹´æœˆæ—¥</Text>
              <TouchableOpacity
                onPress={() => setShowDatePicker(true)}
              >
                <Text>{birthday || 'é¸æŠã—ã¦ãã ã•ã„'}</Text>
              </TouchableOpacity>
              <DateTimePickerModal
                isVisible={showDatePicker}
                mode="date"
                onConfirm={handleDateConfirm}
                onCancel={() => setShowDatePicker(false)}
              />

              <Text>åœ°åŸŸ</Text>
              <ScrollView>
                {PREFECTURES.map((item) => (
                  <TouchableOpacity
                    key={item}
                    onPress={() => setRegion(item)}
                  >
                    <Text>{item}</Text>
                  </TouchableOpacity>
                ))}
              </ScrollView>

              <Text>ãƒ‘ãƒ¼ãƒˆ</Text>
              <CheckBoxGroup
                options={PARTS}
                selected={parts}
                onChange={setParts}
              />

              <Text>ã‚¸ãƒ£ãƒ³ãƒ«</Text>
              <CheckBoxGroup
                options={GENRES}
                selected={genres}
                onChange={setGenres}
              />

              <Text>å¥½ããªæ›²</Text>
              <TextInput
                value={song}
                onChangeText={setSong}
                placeholder="50æ–‡å­—ä»¥å†…"
              />

              <Text>ãã®æ›²ã®å¥½ããªç†ç”±</Text>
              <TextInput
                value={meaning}
                onChangeText={setMeaning}
                placeholder="50æ–‡å­—ä»¥å†…"
              />

              <Text>éŸ³æ¥½ã‚’å§‹ã‚ãŸãã£ã‹ã‘</Text>
              <TextInput
                value={intro}
                onChangeText={setIntro}
                placeholder="50æ–‡å­—ä»¥å†…"
              />

              <Text>è‡ªå·±ç´¹ä»‹</Text>
              <TextInput
                value={selfIntro}
                onChangeText={setSelfIntro}
                placeholder="300æ–‡å­—ä»¥å†…"
                multiline
              />

              <TouchableOpacity onPress={handleSave}>
                <Text>ä¿å­˜</Text>
              </TouchableOpacity>
            </ScrollView>
          </View>
        </TouchableWithoutFeedback>
      </KeyboardAvoidingView>
    </Modal>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\modals\ProfileEditModal.js =====
import React, { useEffect, useState } from 'react';
import { Alert, Modal, View, ActivityIndicator } from 'react-native';
import OnboardingModal from './OnboardingModal';
import { useAuthStore } from '../store/useAuthStore';
import { supabase } from '../api/supabaseClient';

export default function ProfileEditModal({ visible, onClose }) {
  const user = useAuthStore((state) => state.user);
  const [profile, setProfile] = useState(null);

  useEffect(() => {
    if (!visible) return;

    const fetchProfile = async () => {
      const { data, error } = await supabase
        .from('users')
        .select('*')
        .eq('id', user.id)
        .single();

      if (error) {
        Alert.alert('ã‚¨ãƒ©ãƒ¼', 'ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
      } else {
        setProfile(data);
      }
    };

    fetchProfile();
  }, [visible]);

  const handleClose = () => {
    onClose?.();
    Alert.alert('å®Œäº†', 'ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†ã‚’çµ‚äº†ã—ã¾ã—ãŸã€‚');
  };

  if (!profile) {
    return (
      <Modal visible={visible} transparent animationType="slide">
        <View>
          <ActivityIndicator size="large" />
        </View>
      </Modal>
    );
  }

  return (
    <Modal visible={visible} animationType="slide" transparent>
      {profile ? (
        <View>
          <OnboardingModal
            visible={true}
            onClose={handleClose}
            initialProfile={profile}
            mode="edit"
          />
        </View>
      ) : (
        <View>
          <ActivityIndicator size="large" />
        </View>
      )}
    </Modal>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\modals\ProfileViewModal.js =====
import React, { useEffect, useState } from 'react';
import {
  Modal,
  View,
  Text,
  Image,
  ScrollView,
  TextInput,
  TouchableOpacity,
  Alert,
  ActivityIndicator,
} from 'react-native';
import { supabase } from '../api/supabaseClient';
import { useAuthStore } from '../store/useAuthStore';
import CommentList from '../components/forms/CommentList';
import BackFAB from '../components/ui/BackFAB';

export default function ProfileViewModal({ visible, profile, onClose }) {
  const currentUser = useAuthStore((state) => state.user);

  const isSelf = currentUser?.id === profile?.id;

  const [comments, setComments] = useState([]);
  const [newComment, setNewComment] = useState('');
  const [likeCount, setLikeCount] = useState(0);
  const [hasLiked, setHasLiked] = useState(false);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    if (!visible || !profile?.id) return;
    fetchData();
  }, [visible, profile]);

  const fetchData = async () => {
    setLoading(true);
    await Promise.all([fetchComments(), fetchLikeCount(), checkIfLiked()]);
    setLoading(false);
  };

  const fetchComments = async () => {
    const { data } = await supabase
      .from('comments')
      .select('*, from_user_id!inner(nickname, avatar_url)')
      .eq('to_user_id', profile.id)
      .order('created_at', { ascending: false });
    setComments(data || []);
  };

  const fetchLikeCount = async () => {
    const { count } = await supabase
      .from('likes')
      .select('*', { count: 'exact', head: true })
      .eq('to_user_id', profile.id);
    setLikeCount(count || 0);
  };

  const checkIfLiked = async () => {
    const { data } = await supabase
      .from('likes')
      .select('id')
      .eq('from_user_id', currentUser.id)
      .eq('to_user_id', profile.id);
    setHasLiked(data?.length > 0);
  };

  const handleLike = async () => {
    if (isSelf || hasLiked) return;

    const { data, error } = await supabase
      .from('likes')
      .insert({ from_user_id: currentUser.id, to_user_id: profile.id })
      .select()
      .single();

    if (!error && data) {
      setHasLiked(true);
      setLikeCount((prev) => prev + 1);
      await supabase.from('notifications').insert({
        user_id: profile.id,
        type: 'like',
        reference_id: data.id,
      });
    } else {
      Alert.alert('ã‚¨ãƒ©ãƒ¼', 'ã„ã„ã­ã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  };

  const handleCommentSubmit = async () => {
    if (!newComment.trim()) return;
    const { data, error } = await supabase
      .from('comments')
      .insert({
        from_user_id: currentUser.id,
        to_user_id: profile.id,
        content: newComment,
      })
      .select()
      .single();

    if (!error && data) {
      await supabase.from('notifications').insert({
        user_id: profile.id,
        type: 'comment',
        reference_id: data.id,
      });
      setNewComment('');
      fetchComments();
    } else {
      Alert.alert('ã‚¨ãƒ©ãƒ¼', 'ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿ã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  };

  return (
    <Modal visible={visible} animationType="slide" transparent>
      <View>
        <ScrollView>
          <View>
            <Image source={{ uri: profile.avatar_url }} />
            <Text>{profile.nickname}</Text>
            <View />

            <View>
              <Text>æ€§åˆ¥</Text>
              <Text>{profile.gender || 'æœªè¨­å®š'}</Text>

              <Text>ç”Ÿå¹´æœˆæ—¥</Text>
              <Text>{profile.birthday || 'æœªè¨­å®š'}</Text>

              <Text>åœ°åŸŸ</Text>
              <Text>{profile.region || 'æœªè¨­å®š'}</Text>

              <Text>äººç”Ÿæ›²</Text>
              <Text>{profile.song || 'æœªè¨­å®š'}</Text>

              <Text>ãƒãƒ³ãƒ‰ã¨ã¯</Text>
              <Text>{profile.meaning || 'æœªè¨­å®š'}</Text>

              <Text>ä¸€è¨€ç´¹ä»‹</Text>
              <Text>{profile.intro || 'æœªè¨­å®š'}</Text>

              <Text>è‡ªå·±ç´¹ä»‹</Text>
              <Text>{profile.self_intro || 'æœªè¨­å®š'}</Text>
            </View>

            <View>
              <Text>â¤ï¸ ã„ã„ã­æ•°: {likeCount}</Text>
              {!isSelf && !hasLiked && (
                <TouchableOpacity onPress={handleLike}>
                  <Text>ğŸ‘ ã„ã„ã­</Text>
                </TouchableOpacity>
              )}
            </View>
          </View>

          <View>
            <Text>ğŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆ</Text>
            {loading ? (
              <ActivityIndicator />
            ) : comments.length === 0 ? (
              <Text>ã¾ã ã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã‚Šã¾ã›ã‚“</Text>
            ) : (
              <CommentList
                comments={comments}
                currentUserId={currentUser.id}
                onDeleted={fetchComments}
              />
            )}

            {!isSelf && (
              <View>
                <TextInput
                  placeholder="ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ›..."
                  value={newComment}
                  onChangeText={setNewComment}
                />
                <TouchableOpacity onPress={handleCommentSubmit}>
                  <Text>æŠ•ç¨¿</Text>
                </TouchableOpacity>
              </View>
            )}
          </View>
        </ScrollView>
        <BackFAB onPress={onClose} />
      </View>
    </Modal>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\modals\SearchModal.js =====
import React, { useState, useEffect } from 'react';
import {
  View,
  Text,
  TextInput,
  TouchableOpacity,
  Modal,
  ActivityIndicator,
  FlatList,
  KeyboardAvoidingView,
  TouchableWithoutFeedback,
  Keyboard,
} from 'react-native';
import { useNavigation } from '@react-navigation/native';
import { supabase } from '../api/supabaseClient';
import BackFAB from '../components/ui/BackFAB';

const CATEGORIES = ['ãƒ¦ãƒ¼ã‚¶ãƒ¼', 'ãƒãƒ³ãƒ‰', 'ã‚»ãƒƒã‚·ãƒ§ãƒ³', 'ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£'];

export default function SearchModal({
  visible,
  onClose,
  onSearch,
  onProfileSelect,
}) {
  const navigation = useNavigation();

  const [keyword, setKeyword] = useState('');
  const [category, setCategory] = useState('ãƒ¦ãƒ¼ã‚¶ãƒ¼');
  const [results, setResults] = useState([]);
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    if (!keyword.trim()) {
      setResults([]);
      return;
    }
    const timer = setTimeout(() => {
      fetchResults();
    }, 400);

    return () => clearTimeout(timer);
  }, [keyword, category]);

  const fetchResults = async () => {
    setLoading(true);
    let query;

    if (category === 'ãƒ¦ãƒ¼ã‚¶ãƒ¼') {
      query = supabase
        .from('users')
        .select('id, nickname, avatar_url, region')
        .ilike('nickname', `%${keyword}%`);
    } else {
      const table = category === 'ãƒãƒ³ãƒ‰' ? 'band_posts' : 'session_posts';
      query = supabase
        .from(table)
        .select('id, title, region')
        .ilike('title', `%${keyword}%`);
    }

    const { data } = await query;
    setResults(data || []);
    setLoading(false);
  };

  const handleSubmit = () => {
    if (!keyword.trim()) return;
    if (onSearch) {
      onSearch({ keyword: keyword.trim(), category });
      onClose();
    }
  };

  const handleResultPress = (item) => {
    if (category === 'ãƒ¦ãƒ¼ã‚¶ãƒ¼' && onProfileSelect) {
      onProfileSelect(item);
    } else {
      onClose();
      navigation.navigate(
        category === 'ãƒãƒ³ãƒ‰' ? 'BandDetail' : 'SessionDetail',
        { post: item },
      );
    }
  };

  const renderItem = ({ item }) => (
    <TouchableOpacity onPress={() => handleResultPress(item)}>
      <Text>
        {item.nickname || item.title}ï¼ˆ{item.region || 'åœ°åŸŸæœªè¨­å®š'}ï¼‰
      </Text>
    </TouchableOpacity>
  );

  return (
    <Modal visible={visible} animationType="slide" transparent>
      <KeyboardAvoidingView
        behavior="padding"
      >
        <TouchableWithoutFeedback onPress={Keyboard.dismiss}>
          <View>
            <View>
              <Text>ã‚«ãƒ†ã‚´ãƒª</Text>
              <View>
                {CATEGORIES.map((c) => (
                  <TouchableOpacity
                    key={c}
                    onPress={() => setCategory(c)}
                  >
                    <Text>
                      {c}
                    </Text>
                  </TouchableOpacity>
                ))}
              </View>
              <TextInput
                placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›..."
                value={keyword}
                onChangeText={setKeyword}
                returnKeyType="search"
                onSubmitEditing={handleSubmit}
              />
            </View>

            {loading ? (
              <ActivityIndicator />
            ) : results.length === 0 ? (
              <Text>
                è©²å½“ã™ã‚‹{category}ã¯ã‚ã‚Šã¾ã›ã‚“
              </Text>
            ) : (
              <>
                <Text>
                  ğŸ” æ¤œç´¢çµæœï¼ˆæœ€å¤§20ä»¶è¡¨ç¤ºï¼‰
                </Text>
                <FlatList
                  data={results.slice(0, 20)}
                  keyExtractor={(item) => item.id?.toString()}
                  renderItem={renderItem}
                />
                {results.length > 5 && (
                  <TouchableOpacity
                    onPress={() => {
                      onClose();
                      navigation.navigate('SearchResults', {
                        keyword,
                        category,
                      });
                    }}
                  >
                    <Text>ã•ã‚‰ã«è¦‹ã‚‹ â–¶</Text>
                  </TouchableOpacity>
                )}
              </>
            )}

            <BackFAB onPress={onClose} />
          </View>
        </TouchableWithoutFeedback>
      </KeyboardAvoidingView>
    </Modal>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\modals\SessionPostModal.js =====
import React, { useState, useEffect } from 'react';
import {
  Modal,
  View,
  Text,
  TextInput,
  TouchableOpacity,
  Alert,
  ScrollView,
  Switch,
  KeyboardAvoidingView,
  Platform,
  TouchableWithoutFeedback,
  Keyboard,
} from 'react-native';
import { supabase } from '../api/supabaseClient';
import { useAuthStore } from '../store/useAuthStore';
import { PARTS } from '../constants/parts';
import { GENRES } from '../constants/genres';
import { PREFECTURES } from '../constants/prefectures';
import { DAYS } from '../constants/days';
import { DIRECTIONS } from '../constants/directions';
import CheckBoxGroup from '../components/forms/CheckBoxGroup';
import DropdownSelector from '../components/forms/DropdownSelector';

export default function SessionPostModal({
  visible,
  onClose,
  onPostCreated,
  mode = 'create',
  initialData = {},
}) {
  const user = useAuthStore((state) => state.user);
  const isEdit = mode === 'edit';

  const [title, setTitle] = useState('');
  const [region, setRegion] = useState('');
  const [description, setDescription] = useState('');
  const [selectedParts, setSelectedParts] = useState([]);
  const [selectedGenres, setSelectedGenres] = useState([]);
  const [isPublic, setIsPublic] = useState(true);
  const [postToX, setPostToX] = useState(false);
  const [activityDays, setActivityDays] = useState([]);
  const [directions, setDirections] = useState([]);
  const [gender, setGender] = useState('');
  const [ageMin, setAgeMin] = useState('');
  const [ageMax, setAgeMax] = useState('');
  const [isBeginnerOk, setIsBeginnerOk] = useState(false);
  const [demoUrl, setDemoUrl] = useState('');

  useEffect(() => {
    if (isEdit && initialData) {
      setTitle(initialData.title || '');
      setRegion(initialData.region || '');
      setDescription(initialData.description || '');
      setSelectedParts(initialData.parts || []);
      setSelectedGenres(initialData.genres || []);
      setIsPublic(initialData.is_public ?? true);
      setPostToX(initialData.post_to_x ?? false);
      setActivityDays(initialData.activity_days || []);
      setDirections(initialData.directions || []);
      setGender(initialData.gender || '');
      setAgeMin(initialData.age_range?.split('~')[0] || '');
      setAgeMax(initialData.age_range?.split('~')[1] || '');
      setIsBeginnerOk(initialData.is_beginner_ok ?? false);
      setDemoUrl(initialData.demo_url || '');
    } else {
      setTitle('');
      setRegion('');
      setDescription('');
      setSelectedParts([]);
      setSelectedGenres([]);
      setIsPublic(true);
      setPostToX(false);
      setActivityDays([]);
      setDirections([]);
      setGender('');
      setAgeMin('');
      setAgeMax('');
      setIsBeginnerOk(false);
      setDemoUrl('');
    }
  }, [visible]);

  const handleSubmit = async () => {
    if (
      !title ||
      !region ||
      !description ||
      selectedParts.length === 0 ||
      selectedGenres.length === 0
    ) {
      Alert.alert('å…¨ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
      return;
    }

    const payload = {
      user_id: user.id,
      title,
      region,
      description,
      parts: selectedParts,
      genres: selectedGenres,
      is_public: isPublic,
      post_to_x: postToX,
      activity_days: activityDays,
      directions,
      gender,
      age_range: ageMin && ageMax ? `${ageMin}~${ageMax}` : '',
      is_beginner_ok: isBeginnerOk,
      demo_url: demoUrl,
    };

    const method = isEdit ? 'update' : 'insert';
    const table = 'session_posts';
    const query = isEdit
      ? supabase.from(table).update(payload).eq('id', initialData.id)
      : supabase.from(table).insert(payload);

    const { error } = await query;
    if (error)
      return Alert.alert(isEdit ? 'æ›´æ–°å¤±æ•—' : 'æŠ•ç¨¿å¤±æ•—', error.message);

    onClose();
    onPostCreated();
  };

  return (
    <Modal visible={visible} animationType="slide" transparent>
      <KeyboardAvoidingView
        behavior={Platform.OS === 'ios' ? 'padding' : 'height'}
      >
        <TouchableWithoutFeedback onPress={Keyboard.dismiss}>
          <ScrollView>
            <View>
              <Text>
                {isEdit ? 'ğŸ“ æŠ•ç¨¿ã‚’ç·¨é›†' : 'âœï¸ ã‚»ãƒƒã‚·ãƒ§ãƒ³å‹Ÿé›†'}
              </Text>

              <TextInput
                placeholder="ã‚¿ã‚¤ãƒˆãƒ«"
                value={title}
                onChangeText={setTitle}
              />

              <DropdownSelector
                label="åœ°åŸŸ"
                options={PREFECTURES}
                selected={region}
                onSelect={setRegion}
              />
              <CheckBoxGroup
                label="æ‹…å½“ãƒ‘ãƒ¼ãƒˆ"
                options={PARTS}
                selected={selectedParts}
                onChange={setSelectedParts}
              />
              <CheckBoxGroup
                label="ã‚¸ãƒ£ãƒ³ãƒ«"
                options={GENRES}
                selected={selectedGenres}
                onChange={setSelectedGenres}
              />

              <TextInput
                placeholder="å†…å®¹"
                value={description}
                onChangeText={setDescription}
                multiline
              />

              <CheckBoxGroup
                label="æ´»å‹•æ›œæ—¥"
                options={DAYS}
                selected={activityDays}
                onChange={setActivityDays}
              />
              <CheckBoxGroup
                label="æ´»å‹•æ–¹å‘æ€§"
                options={DIRECTIONS}
                selected={directions}
                onChange={setDirections}
              />
              <CheckBoxGroup
                label="å‹Ÿé›†æ€§åˆ¥"
                options={['ç”·æ€§', 'å¥³æ€§', 'ä¸å•']}
                selected={gender ? [gender] : []}
                onChange={(arr) => setGender(arr[0])}
              />

              <Text>å‹Ÿé›†å¹´é½¢</Text>
              <View>
                <TextInput
                  placeholder="æœ€ä½å¹´é½¢"
                  keyboardType="numeric"
                  value={ageMin}
                  onChangeText={setAgeMin}
                />
                <Text>ã€œ</Text>
                <TextInput
                  placeholder="æœ€é«˜å¹´é½¢"
                  keyboardType="numeric"
                  value={ageMax}
                  onChangeText={setAgeMax}
                />
              </View>

              <Text>å‚è€ƒURL</Text>
              <TextInput
                placeholder="X ãƒ» Instagram ãƒ» DemoURL ãªã©"
                value={demoUrl}
                onChangeText={setDemoUrl}
              />

              <View>
                <Text>åˆå¿ƒè€…OK</Text>
                <Switch
                  value={isBeginnerOk}
                  onValueChange={setIsBeginnerOk}
                />
              </View>
              <View>
                <Text>å…¬é–‹ã™ã‚‹</Text>
                <Switch value={isPublic} onValueChange={setIsPublic} />
              </View>
              <View>
                <Text>Xã«ã‚‚æŠ•ç¨¿</Text>
                <Switch value={postToX} onValueChange={setPostToX} />
              </View>

              <View>
                <TouchableOpacity onPress={onClose}>
                  <Text>é–‰ã˜ã‚‹</Text>
                </TouchableOpacity>
                <TouchableOpacity
                  onPress={handleSubmit}
                >
                  <Text>{isEdit ? 'æ›´æ–°' : 'æŠ•ç¨¿'}</Text>
                </TouchableOpacity>
              </View>
            </View>
          </ScrollView>
        </TouchableWithoutFeedback>
      </KeyboardAvoidingView>
    </Modal>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\modals\UserMiniModal.js =====
import React from 'react';
import { Modal, View, Text, TouchableOpacity } from 'react-native';
import ProfileImage from '../components/ui/ProfileImage';

export default function UserMiniModal({ visible, user, onClose, onViewProfile, onChat }) {
  if (!user) return null;
  return (
    <Modal visible={visible} transparent animationType="fade">
      <View>
        <View>
          <ProfileImage uri={user.avatar_url} size={64} />
          <Text>{user.nickname}</Text>
          {user.region && <Text>åœ°åŸŸ: {user.region}</Text>}
          {user.parts && <Text>ãƒ‘ãƒ¼ãƒˆ: {user.parts}</Text>}
          <View>
            <TouchableOpacity onPress={onViewProfile}>
              <Text>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’è¦‹ã‚‹</Text>
            </TouchableOpacity>
            <TouchableOpacity onPress={onChat}>
              <Text>ãƒãƒ£ãƒƒãƒˆã™ã‚‹</Text>
            </TouchableOpacity>
          </View>
          <TouchableOpacity onPress={onClose}>
            <Text>é–‰ã˜ã‚‹</Text>
          </TouchableOpacity>
        </View>
      </View>
    </Modal>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\navigation\AuthStack.js =====
import React from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createNativeStackNavigator } from '@react-navigation/native-stack';
import { navigationRef } from './navigationRef';

import SignInScreen from '../screens/SignInScreen';
import SignUpScreen from '../screens/SignUpScreen';
import BandDetailScreen from '../screens/BandDetailScreen';
import SessionDetailScreen from '../screens/SessionDetailScreen';
import SearchResultsScreen from '../screens/SearchResultsScreen';
import PrivateChatRoomScreen from '../screens/PrivateChatRoomScreen';
import GroupChatRoomScreen from '../screens/GroupChatRoomScreen';
import MainWrapper from './MainWrapper';

const Stack = createNativeStackNavigator();

export default function AuthStack() {
  return (
    <NavigationContainer ref={navigationRef}>
      <Stack.Navigator screenOptions={{ headerShown: false }}>
        <Stack.Screen name="SignIn" component={SignInScreen} />
        <Stack.Screen name="SignUp" component={SignUpScreen} />
        <Stack.Screen name="Main" component={MainWrapper} />
        <Stack.Screen name="SearchResults" component={SearchResultsScreen} />
        <Stack.Screen name="BandDetail" component={BandDetailScreen} />
        <Stack.Screen name="SessionDetail" component={SessionDetailScreen} />
        <Stack.Screen name="PrivateChatRoom" component={PrivateChatRoomScreen} />
        <Stack.Screen name="GroupChatRoom" component={GroupChatRoomScreen} />
      </Stack.Navigator>
    </NavigationContainer>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\navigation\BandStackNavigator.js =====
import React from 'react';
import { createNativeStackNavigator } from '@react-navigation/native-stack';
import BandListScreen from '../screens/BandListScreen';
import BandDetailScreen from '../screens/BandDetailScreen';

const Stack = createNativeStackNavigator();

export default function BandStackNavigator() {
  return (
    <Stack.Navigator>
      <Stack.Screen
        name="BandList"
        component={BandListScreen}
        options={{ headerShown: false }}
      />
      <Stack.Screen
        name="BandDetail"
        component={BandDetailScreen}
        options={{ headerShown: false }}
      />
    </Stack.Navigator>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\navigation\DrawerNavigator.js =====
import React from 'react';
import { createDrawerNavigator } from '@react-navigation/drawer';
import { TouchableOpacity, View, Text } from 'react-native';
import Icon from 'react-native-vector-icons/Ionicons';
import { useNavigation } from '@react-navigation/native';
import { useUnreadNotifications } from '../hooks/useUnreadNotifications';

import ChatScreen from '../screens/ChatScreen';
import CommunityScreen from '../screens/CommunityScreen';
import StudioScreen from '../screens/StudioScreen';
import SettingsScreen from '../screens/SettingsScreen';
import BandStackNavigator from './BandStackNavigator';
import SessionStackNavigator from './SessionStackNavigator';

const Drawer = createDrawerNavigator();

function NotificationBell({ onPress }) {
  const unreadCount = useUnreadNotifications();

  return (
    <TouchableOpacity onPress={onPress}>
      <View>
        <Icon name="notifications-outline" size={24} color="#000" />
        {unreadCount > 0 && (
          <View>
            <Text>{unreadCount}</Text>
          </View>
        )}
      </View>
    </TouchableOpacity>
  );
}

// ì¼ë³¸ì–´ ë„¤ì´í‹°ë¸Œ ìŠ¤íƒ€ì¼ë¡œ íƒ€ì´í‹€ ë° ë²„íŠ¼ëª… í˜„ì§€í™”
function screenOptions(title, onOpenNotifications, onOpenSearch) {
  return ({ navigation }) => ({
    headerTitle: title,
    headerLeft: () => (
      <TouchableOpacity onPress={() => navigation.openDrawer()}>
        <Icon name="menu" size={24} color="#000" />
      </TouchableOpacity>
    ),
    headerRight: () => (
      <View style={{ flexDirection: 'row', alignItems: 'center' }}>
        <TouchableOpacity onPress={onOpenSearch}>
          <Icon
            name="search-outline"
            size={24}
            color="#000"
          />
        </TouchableOpacity>
        <NotificationBell onPress={onOpenNotifications} />
      </View>
    ),
  });
}

export default function DrawerNavigator({ onOpenNotifications, onOpenSearch }) {
  return (
    <Drawer.Navigator initialRouteName="Band">
      <Drawer.Screen
        name="Band"
        component={BandStackNavigator}
        options={screenOptions('ãƒãƒ³ãƒ‰å‹Ÿé›†', onOpenNotifications, onOpenSearch)}
      />
      <Drawer.Screen
        name="Session"
        component={SessionStackNavigator}
        options={screenOptions(
          'ãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†',
          onOpenNotifications,
          onOpenSearch,
        )}
      />
      <Drawer.Screen
        name="Chat"
        component={ChatScreen}
        options={screenOptions('ãƒãƒ£ãƒƒãƒˆ', onOpenNotifications, onOpenSearch)}
      />
      <Drawer.Screen
        name="Community"
        component={CommunityScreen}
        options={screenOptions(
          'ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£',
          onOpenNotifications,
          onOpenSearch,
        )}
      />
      <Drawer.Screen
        name="Studio"
        component={StudioScreen}
        options={screenOptions(
          'ã‚¹ã‚¿ã‚¸ã‚ªæ¢ã—',
          onOpenNotifications,
          onOpenSearch,
        )}
      />
      <Drawer.Screen
        name="Settings"
        component={SettingsScreen}
        options={screenOptions('è¨­å®š', onOpenNotifications, onOpenSearch)}
      />
    </Drawer.Navigator>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\navigation\MainWrapper.js =====
import React, { useEffect, useState } from 'react';
import { View, ActivityIndicator } from 'react-native';
import { supabase } from '../api/supabaseClient';
import { useAuthStore } from '../store/useAuthStore';
import { navigationRef } from './navigationRef';

import DrawerNavigator from './DrawerNavigator';
import OnboardingModal from '../modals/OnboardingModal';
import ProfileViewModal from '../modals/ProfileViewModal';
import ProfileEditModal from '../modals/ProfileEditModal';
import NotificationsModal from '../modals/NotificationsModal';
import SearchModal from '../modals/SearchModal';

export default function MainWrapper() {
  const user = useAuthStore((state) => state.user);
  const [loading, setLoading] = useState(true);
  const [showOnboarding, setShowOnboarding] = useState(false);
  const [showProfileViewModal, setShowProfileViewModal] = useState(false);
  const [showProfileEditModal, setShowProfileEditModal] = useState(false);
  const [showNotificationsModal, setShowNotificationsModal] = useState(false);
  const [showSearchModal, setShowSearchModal] = useState(false);
  const [profileData, setProfileData] = useState(null);

  useEffect(() => {
    const checkProfile = async () => {
      if (!user?.id) return;
      const { data } = await supabase
        .from('users')
        .select('song, meaning, self_intro')
        .eq('id', user.id)
        .single();
      if (!data?.song || !data?.meaning || !data?.self_intro) {
        setShowOnboarding(true);
      }
      setLoading(false);
    };
    checkProfile();
  }, [user]);

  useEffect(() => {
    global.openNotificationsModal = () => setShowNotificationsModal(true);
    global.openSearchModal = () => setShowSearchModal(true);
    global.openProfileViewModal = (profile) => {
      setProfileData(profile);
      setShowProfileViewModal(true);
    };
    global.openProfileEditModal = () => setShowProfileEditModal(true);
  }, []);

  if (loading) {
    return <ActivityIndicator />;
  }

  return (
    <>
      <DrawerNavigator
        onOpenNotifications={() => setShowNotificationsModal(true)}
        onOpenSearch={() => setShowSearchModal(true)}
      />
      <OnboardingModal
        visible={showOnboarding}
        onClose={() => setShowOnboarding(false)}
        initialProfile={user}
      />

      {showProfileEditModal && (
        <ProfileEditModal onClose={() => setShowProfileEditModal(false)} />
      )}

      <NotificationsModal
        visible={showNotificationsModal}
        onClose={() => setShowNotificationsModal(false)}
        onProfileSelect={(profile) => {
          setProfileData(profile);
          setShowProfileViewModal(true);
        }}
      />
      {showProfileViewModal && profileData && (
        <ProfileViewModal
          visible={showProfileViewModal}
          profile={profileData}
          onClose={() => setShowProfileViewModal(false)}
        />
      )}

      {showSearchModal && (
        <SearchModal
          visible={true}
          onClose={() => setShowSearchModal(false)}
          onSearch={({ keyword, category }) => {
            setShowSearchModal(false);
            navigationRef.current?.navigate('SearchResults', {
              keyword,
              category,
            });
          }}
        />
      )}
    </>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\navigation\navigationRef.js =====
import { createNavigationContainerRef } from '@react-navigation/native';

export const navigationRef = createNavigationContainerRef();


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\navigation\SessionStackNavigator.js =====
import React from 'react';
import { createNativeStackNavigator } from '@react-navigation/native-stack';
import SessionListScreen from '../screens/SessionListScreen';
import SessionDetailScreen from '../screens/SessionDetailScreen';

const Stack = createNativeStackNavigator();

export default function SessionStackNavigator() {
  return (
    <Stack.Navigator>
      <Stack.Screen
        name="SessionList"
        component={SessionListScreen}
        options={{ headerShown: false }}
      />
      <Stack.Screen
        name="SessionDetail"
        component={SessionDetailScreen}
        options={{ headerShown: false }}
      />
    </Stack.Navigator>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\screens\BandDetailScreen.js =====
import React, { useEffect, useState } from 'react';
import {
  View,
  Text,
  Image,
  TouchableOpacity,
  ScrollView,
  Alert,
} from 'react-native';
import { format } from 'date-fns';
import { supabase } from '../api/supabaseClient';
import { useAuthStore } from '../store/useAuthStore';
import BandPostModal from '../modals/BandPostModal';
import BackFAB from '../components/ui/BackFAB';
import LikeButton from '../components/ui/LikeButton';
import CommentList from '../components/forms/CommentList';

export default function BandDetailScreen({ route, navigation }) {
  const { post } = route.params;
  const currentUser = useAuthStore((state) => state.user);
  const [profile, setProfile] = useState(null);
  const [editModal, setEditModal] = useState(false);

  useEffect(() => {
    fetchAuthorProfile();
  }, []);

  const fetchAuthorProfile = async () => {
    const { data } = await supabase
      .from('users')
      .select('nickname, avatar_url')
      .eq('id', post.user_id)
      .single();
    if (data) setProfile(data);
  };

  const handleDeletePost = async () => {
    Alert.alert('å‰Šé™¤ç¢ºèª', 'ã“ã®æŠ•ç¨¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ', [
      { text: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«' },
      {
        text: 'å‰Šé™¤',
        style: 'destructive',
        onPress: async () => {
          const { error } = await supabase
            .from('band_posts')
            .delete()
            .eq('id', post.id);
          if (!error) {
            Alert.alert('å‰Šé™¤ã•ã‚Œã¾ã—ãŸ');
            navigation.goBack();
          }
        },
      },
    ]);
  };

  const renderTagList = (emoji, label, list = []) => (
    <View>
      <Text>
        {emoji} {label}
      </Text>
      <View>
        {(list?.length > 0 ? list : ['-']).map((item, idx) => (
          <Text key={idx}>
            {item}
          </Text>
        ))}
      </View>
      <View />
    </View>
  );

  const renderAgeRange = () => (
    <View>
      <Text>ğŸ‚ å‹Ÿé›†å¹´é½¢</Text>
      <Text>
        {post.age_range ? post.age_range.replace('~', 'ã€œ') + ' æ­³' : 'å…¨å¹´é½¢'}
      </Text>
      <View />
    </View>
  );

  const renderBeginnerOk = () => (
    <View>
      <Text>ğŸ£ åˆå¿ƒè€…OK</Text>
      <View>
        <View />
        <Text>{post.is_beginner_ok ? '' : ''}</Text>
      </View>
      <View />
    </View>
  );

  return (
    <View>
      <ScrollView>
        <View>
          <View>
            <View>
              <Text>
                ã€Œ{post.region || 'ã“ã ã‚ã‚‰ãªã„'}ã€{post.title}
              </Text>
              <Text>
                æŠ•ç¨¿æ—¥:{' '}
                {post.created_at
                  ? format(new Date(post.created_at), 'yyyy/MM/dd')
                  : 'æ—¥ä»˜ä¸æ˜'}
              </Text>
            </View>
            <View>
              {profile && (
                <>
                  <Image
                    source={{ uri: profile.avatar_url }}
                  />
                  <Text>{profile.nickname}</Text>
                </>
              )}
            </View>
          </View>
          <View />
          {renderTagList('ğŸ¸', 'ãƒ‘ãƒ¼ãƒˆ', post.parts)}
          {renderTagList('ğŸ¼', 'ã‚¸ãƒ£ãƒ³ãƒ«', post.genres)}
          {renderTagList('ğŸ“…', 'æ´»å‹•æ›œæ—¥', post.activity_days)}
          {renderTagList('ğŸ“', 'æ–¹å‘æ€§', post.directions)}
          {renderTagList('ğŸ‘¥', 'å‹Ÿé›†æ€§åˆ¥', post.gender ? [post.gender] : [])}
          {renderAgeRange()}
          {renderTagList('ğŸ”—', 'URL', post.demo_url ? [post.demo_url] : [])}
          {renderBeginnerOk()}
          <View>
            <LikeButton to_user_id={post.user_id} />
            {currentUser.id === post.user_id && (
              <View>
                <TouchableOpacity onPress={() => setEditModal(true)}>
                  <Text>âœï¸ ç·¨é›†</Text>
                </TouchableOpacity>
                <TouchableOpacity onPress={handleDeletePost}>
                  <Text>ğŸ—‘ å‰Šé™¤</Text>
                </TouchableOpacity>
              </View>
            )}
          </View>
        </View>
        <CommentList to_user_id={post.user_id} />
      </ScrollView>
      <BackFAB />
      <BandPostModal
        visible={editModal}
        mode="edit"
        initialData={post}
        onClose={() => setEditModal(false)}
        onPostCreated={() => setEditModal(false)}
      />
    </View>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\screens\BandListScreen.js =====
import React, { useEffect, useLayoutEffect, useState } from 'react';
import {
  View,
  Text,
  FlatList,
  TouchableOpacity,
} from 'react-native';
import { supabase } from '../api/supabaseClient';
import { format } from 'date-fns';
import BandPostModal from '../modals/BandPostModal';
import { useAuthStore } from '../store/useAuthStore';
import { useNavigation } from '@react-navigation/native';

export default function BandListScreen() {
  const [posts, setPosts] = useState([]);
  const [showModal, setShowModal] = useState(false);
  const user = useAuthStore((state) => state.user);
  const navigation = useNavigation();

  useEffect(() => {
    fetchPosts();
  }, []);

  const fetchPosts = async () => {
    const { data } = await supabase
      .from('band_posts')
      .select('*')
      .order('created_at', { ascending: false });

    if (data) setPosts(data);
  };

  useLayoutEffect(() => {
    navigation.setOptions({
      headerShown: false,
    });
  }, [navigation]);

  return (
    <View>
      <FlatList
        data={posts}
        keyExtractor={(item) => item.id}
        renderItem={({ item }) => (
          <TouchableOpacity
            onPress={() => navigation.navigate('BandDetail', { post: item })}
          >
            <Text>{item.title}</Text>
            <Text>
              {item.region}ãƒ»{format(new Date(item.created_at), 'yyyy/M/d')}
            </Text>
          </TouchableOpacity>
        )}
      />

      <TouchableOpacity onPress={() => setShowModal(true)}>
        <Text>ï¼‹</Text>
      </TouchableOpacity>

      <BandPostModal
        visible={showModal}
        onClose={() => setShowModal(false)}
        onPostCreated={fetchPosts}
      />
    </View>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\screens\ChatScreen.js =====
import React, { useEffect, useState } from 'react';
import { View, Text, FlatList, TouchableOpacity } from 'react-native';
import { supabase } from '../api/supabaseClient';
import { useAuthStore } from '../store/useAuthStore';

export default function ChatScreen({ navigation }) {
  const user = useAuthStore((state) => state.user);
  const [rooms, setRooms] = useState([]);

  useEffect(() => {
    fetchRooms();
  }, []);

  const fetchRooms = async () => {
    const { data } = await supabase
      .from('private_chat_rooms')
      .select(`
        id,
        user1_id,
        user2_id,
        created_at,
        user1:users!private_chat_rooms_user1_id_fkey(nickname, avatar_url),
        user2:users!private_chat_rooms_user2_id_fkey(nickname, avatar_url)
      `)
      .or(`user1_id.eq.${user.id},user2_id.eq.${user.id}`);
    if (data) setRooms(data);
  };

  const getOtherUser = (room) =>
    room.user1_id === user.id ? room.user2 : room.user1;

  return (
    <View>
      <Text>è‡ªåˆ†ã®1:1ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ </Text>
      <FlatList
        data={rooms}
        keyExtractor={(item) => item.id}
        renderItem={({ item }) => {
          const other = getOtherUser(item);
          return (
            <TouchableOpacity
              onPress={() => navigation.navigate('PrivateChatRoom', { roomId: item.id, otherUser: other })}
            >
              <Text>{other?.nickname || '-'}</Text>
            </TouchableOpacity>
          );
        }}
        ListEmptyComponent={<Text style={{ textAlign: 'center', color: '#aaa' }}>ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ãŒã‚ã‚Šã¾ã›ã‚“</Text>}
      />
    </View>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\screens\CommunityScreen.js =====
import React, { useEffect, useState } from 'react';
import { View, Text, FlatList, TouchableOpacity } from 'react-native';
import { supabase } from '../api/supabaseClient';
import GroupChatRoomModal from '../modals/GroupChatRoomModal';

export default function CommunityScreen({ navigation }) {
  const [rooms, setRooms] = useState([]);
  const [showModal, setShowModal] = useState(false);

  useEffect(() => {
    fetchRooms();
  }, []);

  const fetchRooms = async () => {
    const { data } = await supabase
      .from('group_chat_rooms')
      .select('*')
      .order('created_at', { ascending: false });
    if (data) setRooms(data);
  };

  return (
    <View>
      <Text>ã‚°ãƒ«ãƒ¼ãƒ—ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ä¸€è¦§</Text>
      <FlatList
        data={rooms}
        keyExtractor={(item) => item.id}
        renderItem={({ item }) => (
          <TouchableOpacity
            onPress={() => navigation.navigate('GroupChatRoom', { roomId: item.id })}
          >
            <Text>{item.name}</Text>
            <Text>
              ({item.is_public ? 'å…¬é–‹' : 'éå…¬é–‹'}) | {item.max_members}äºº
            </Text>
            {item.notice ? <Text>ãŠçŸ¥ã‚‰ã›: {item.notice}</Text> : null}
          </TouchableOpacity>
        )}
        ListEmptyComponent={<Text style={{ textAlign: 'center', color: '#aaa' }}>ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ãŒã‚ã‚Šã¾ã›ã‚“</Text>}
      />
      <TouchableOpacity onPress={() => setShowModal(true)}>
        <Text>ï¼‹</Text>
      </TouchableOpacity>
      <GroupChatRoomModal
        visible={showModal}
        onClose={() => setShowModal(false)}
        onCreated={fetchRooms}
      />
    </View>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\screens\GroupChatRoomScreen.js =====
import React, { useEffect, useState, useRef } from 'react';
import { View, Text, TextInput, TouchableOpacity, FlatList, KeyboardAvoidingView, Alert } from 'react-native';
import { supabase } from '../api/supabaseClient';
import { useAuthStore } from '../store/useAuthStore';

export default function GroupChatRoomScreen({ route }) {
  const { roomId } = route.params;
  const user = useAuthStore((state) => state.user);
  const [room, setRoom] = useState({});
  const [messages, setMessages] = useState([]);
  const [input, setInput] = useState('');
  const [notice, setNotice] = useState('');
  const flatListRef = useRef();

  useEffect(() => {
    fetchRoom();
    fetchMessages();
    const channel = supabase
      .channel('group_chat_messages:' + roomId)
      .on('postgres_changes',
        { event: '*', schema: 'public', table: 'group_chat_messages', filter: `room_id=eq.${roomId}` },
        fetchMessages
      ).subscribe();
    return () => { supabase.removeChannel(channel); }
  }, [roomId]);

  const fetchRoom = async () => {
    const { data } = await supabase
      .from('group_chat_rooms')
      .select('*')
      .eq('id', roomId)
      .single();
    if (data) {
      setRoom(data);
      setNotice(data.notice || '');
    }
  };

  const fetchMessages = async () => {
    const { data } = await supabase
      .from('group_chat_messages')
      .select('*')
      .eq('room_id', roomId)
      .order('created_at', { ascending: true });
    if (data) setMessages(data);
  };

  const sendMessage = async () => {
    if (input.trim()) {
      await supabase.from('group_chat_messages').insert({
        room_id: roomId, sender_id: user.id, content: input,
      });
      setInput('');
      setTimeout(() => flatListRef.current?.scrollToEnd({ animated: true }), 100);
    }
  };

  const isOwner = room.owner_id === user.id;
  const updateNotice = async () => {
    await supabase.from('group_chat_rooms').update({ notice }).eq('id', roomId);
    Alert.alert('ãŠçŸ¥ã‚‰ã›ã®ç·¨é›†', 'ãŠçŸ¥ã‚‰ã›ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸã€‚');
    fetchRoom();
  };

  return (
    <KeyboardAvoidingView behavior="padding">
      <View>
        <Text>{room.name || 'ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ '}</Text>
        <Text>{room.description}</Text>
        <View>
          <Text>ãŠçŸ¥ã‚‰ã›</Text>
          {isOwner ? (
            <View>
              <TextInput
                value={notice}
                onChangeText={setNotice}
                placeholder="ãŠçŸ¥ã‚‰ã›ã‚’å…¥åŠ›"
              />
              <TouchableOpacity onPress={updateNotice}>
                <Text>ãŠçŸ¥ã‚‰ã›ã‚’ç·¨é›†</Text>
              </TouchableOpacity>
            </View>
          ) : (
            <Text>{room.notice || '(ãŠçŸ¥ã‚‰ã›ãªã—)'}</Text>
          )}
        </View>
        <FlatList
          ref={flatListRef}
          data={messages}
          keyExtractor={item => item.id}
          renderItem={({ item }) => (
            <View style={{
              alignSelf: item.sender_id === user.id ? 'flex-end' : 'flex-start',
            }}>
              <Text>{item.content}</Text>
              <Text style={{ fontSize: 10 }}>{item.created_at?.slice(11,16)}</Text>
            </View>
          )}
        />
        <View style={{ flexDirection: 'row' }}>
          <TextInput
            style={{ flex: 1 }}
            value={input}
            onChangeText={setInput}
            placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›"
          />
          <TouchableOpacity onPress={sendMessage}>
            <Text>é€ä¿¡</Text>
          </TouchableOpacity>
        </View>
      </View>
    </KeyboardAvoidingView>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\screens\PrivateChatRoomScreen.js =====
import React, { useEffect, useState, useRef } from 'react';
import { View, Text, TextInput, TouchableOpacity, FlatList, KeyboardAvoidingView } from 'react-native';
import { supabase } from '../api/supabaseClient';
import { useAuthStore } from '../store/useAuthStore';

export default function PrivateChatRoomScreen({ route }) {
  const { roomId, otherUser } = route.params;
  const user = useAuthStore((state) => state.user);
  const [messages, setMessages] = useState([]);
  const [input, setInput] = useState('');
  const flatListRef = useRef();

  useEffect(() => {
    fetchMessages();
    const channel = supabase
      .channel('private_chat_messages:'+roomId)
      .on('postgres_changes',
        { event: '*', schema: 'public', table: 'private_chat_messages', filter: `room_id=eq.${roomId}` },
        fetchMessages
      ).subscribe();
    return () => { supabase.removeChannel(channel); }
  }, [roomId]);

  const fetchMessages = async () => {
    const { data } = await supabase
      .from('private_chat_messages')
      .select('*')
      .eq('room_id', roomId)
      .order('created_at', { ascending: true });
    if (data) setMessages(data);
  };

  const sendMessage = async () => {
    if (input.trim()) {
      await supabase.from('private_chat_messages').insert({
        room_id: roomId, sender_id: user.id, content: input,
      });
      setInput('');
      setTimeout(() => flatListRef.current?.scrollToEnd({ animated: true }), 100);
    }
  };

  return (
    <KeyboardAvoidingView behavior="padding">
      <View>
        <Text>{otherUser?.nickname || 'ç›¸æ‰‹'}</Text>
        <FlatList
          ref={flatListRef}
          data={messages}
          keyExtractor={item => item.id}
          renderItem={({ item }) => (
            <View style={{
              alignSelf: item.sender_id === user.id ? 'flex-end' : 'flex-start',
            }}>
              <Text>{item.content}</Text>
              <Text style={{ fontSize: 10 }}>{item.created_at?.slice(11,16)}</Text>
            </View>
          )}
        />
        <View style={{ flexDirection: 'row' }}>
          <TextInput
            style={{ flex: 1 }}
            value={input}
            onChangeText={setInput}
            placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›"
          />
          <TouchableOpacity onPress={sendMessage}>
            <Text>é€ä¿¡</Text>
          </TouchableOpacity>
        </View>
      </View>
    </KeyboardAvoidingView>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\screens\SearchResultsScreen.js =====
import React, { useEffect, useState } from 'react';
import {
  View,
  Text,
  FlatList,
  TouchableOpacity,
} from 'react-native';
import { supabase } from '../api/supabaseClient';
import BackFAB from '../components/ui/BackFAB';
import UserFilterBar from '../components/forms/UserFilterBar';

export default function SearchResultsScreen({ route, navigation }) {
  const { keyword, category } = route.params;
  const [results, setResults] = useState([]);
  const [sortBy, setSortBy] = useState('name');
  const [region, setRegion] = useState('ã™ã¹ã¦');
  const [minAge, setMinAge] = useState(null);
  const [maxAge, setMaxAge] = useState(null);
  const [partFilter, setPartFilter] = useState(null);

  useEffect(() => {
    fetchResults();
  }, [keyword, category, sortBy, region, minAge, maxAge, partFilter]);

  const fetchResults = async () => {
    let query;
    if (category === 'ãƒ¦ãƒ¼ã‚¶ãƒ¼') {
      query = supabase
        .from('users')
        .select('*')
        .ilike('nickname', `%${keyword}%`);
      if (region !== 'ã™ã¹ã¦') query = query.eq('region', region);
      if (minAge && maxAge)
        query = query
          .gte('birth_year', 2025 - maxAge)
          .lte('birth_year', 2025 - minAge);
      if (partFilter) query = query.contains('parts', [partFilter]);
      if (sortBy === 'likes') query.order('like_count', { ascending: false });
      else query.order('nickname');
    } else {
      const table = category === 'ãƒãƒ³ãƒ‰' ? 'band_posts' : 'session_posts';
      query = supabase.from(table).select('*').ilike('title', `%${keyword}%`);
      query.order('created_at', { ascending: false });
    }
    const { data } = await query;
    setResults(data || []);
  };

  const renderItem = ({ item }) => (
    <TouchableOpacity>
      <Text>{item.nickname || item.title}</Text>
    </TouchableOpacity>
  );

  return (
    <View>
      <Text>
        ã€Œ{keyword}ã€ã®{category}æ¤œç´¢çµæœï¼ˆ{results.length}ä»¶ï¼‰
      </Text>
      {category === 'ãƒ¦ãƒ¼ã‚¶ãƒ¼' && (
        <UserFilterBar
          sortBy={sortBy}
          setSortBy={setSortBy}
          region={region}
          setRegion={setRegion}
          minAge={minAge}
          maxAge={maxAge}
          setMinAge={setMinAge}
          setMaxAge={setMaxAge}
          partFilter={partFilter}
          setPartFilter={setPartFilter}
        />
      )}
      <FlatList
        data={results}
        keyExtractor={(item) => item.id.toString()}
        renderItem={renderItem}
      />
      <BackFAB onPress={() => navigation.goBack()} />
    </View>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\screens\SessionDetailScreen.js =====
import React, { useEffect, useState } from 'react';
import {
  View,
  Text,
  Image,
  TouchableOpacity,
  ScrollView,
  Alert,
} from 'react-native';
import { format } from 'date-fns';
import { supabase } from '../api/supabaseClient';
import { useAuthStore } from '../store/useAuthStore';
import SessionPostModal from '../modals/SessionPostModal';
import BackFAB from '../components/ui/BackFAB';
import LikeButton from '../components/ui/LikeButton';
import CommentList from '../components/forms/CommentList';
import UserMiniModal from '../modals/UserMiniModal';

export default function SessionDetailScreen({ route, navigation }) {
  const { post } = route.params;
  const currentUser = useAuthStore((state) => state.user);
  const [profile, setProfile] = useState(null);
  const [authorFull, setAuthorFull] = useState(null);
  const [editModal, setEditModal] = useState(false);
  const [miniModal, setMiniModal] = useState(false);

  useEffect(() => {
    fetchAuthorProfile();
  }, []);

  const fetchAuthorProfile = async () => {
    const { data } = await supabase
      .from('users')
      .select('id, nickname, avatar_url, region, parts')
      .eq('id', post.user_id)
      .single();
    if (data) {
      setProfile({ nickname: data.nickname, avatar_url: data.avatar_url });
      setAuthorFull(data);
    }
  };

  const handleChat = async () => {
    if (!authorFull) return;
    const [user1_id, user2_id] =
      currentUser.id < authorFull.id
        ? [currentUser.id, authorFull.id]
        : [authorFull.id, currentUser.id];
    let { data: rooms } = await supabase
      .from('private_chat_rooms')
      .select('*')
      .eq('user1_id', user1_id)
      .eq('user2_id', user2_id);
    let roomId;
    if (rooms && rooms.length > 0) {
      roomId = rooms[0].id;
    } else {
      const { data, error } = await supabase
        .from('private_chat_rooms')
        .insert([{ user1_id, user2_id }])
        .select();
      roomId = data?.[0]?.id;
    }
    setMiniModal(false);
    if (roomId) {
      navigation.navigate('PrivateChatRoom', { roomId, otherUser: authorFull });
    }
  };

  const handleDeletePost = async () => {
    Alert.alert('å‰Šé™¤ç¢ºèª', 'ã“ã®æŠ•ç¨¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ', [
      { text: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«' },
      {
        text: 'å‰Šé™¤',
        style: 'destructive',
        onPress: async () => {
          const { error } = await supabase
            .from('session_posts')
            .delete()
            .eq('id', post.id);
          if (!error) {
            Alert.alert('å‰Šé™¤ã•ã‚Œã¾ã—ãŸ');
            navigation.goBack();
          }
        },
      },
    ]);
  };

  const renderTagList = (emoji, label, list = []) => (
    <View>
      <Text>
        {emoji} {label}
      </Text>
      <View>
        {(list?.length > 0 ? list : ['-']).map((item, idx) => (
          <Text key={idx}>
            {item}
          </Text>
        ))}
      </View>
      <View />
    </View>
  );

  const renderAgeRange = () => (
    <View>
      <Text>ğŸ‚ å‹Ÿé›†å¹´é½¢</Text>
      <Text>
        {post.age_range ? post.age_range.replace('~', 'ã€œ') + ' æ­³' : 'å…¨å¹´é½¢'}
      </Text>
      <View />
    </View>
  );

  const renderBeginnerOk = () => (
    <View>
      <Text>ğŸ£ åˆå¿ƒè€…OK</Text>
      <View>
        <View />
        <Text>{post.is_beginner_ok ? '' : ''}</Text>
      </View>
      <View />
    </View>
  );

  return (
    <View>
      <ScrollView>
        <View>
          <View>
            <View>
              <Text>
                ã€Œ{post.region || 'ã“ã ã‚ã‚‰ãªã„'}ã€{post.title}
              </Text>
              <Text>
                æŠ•ç¨¿æ—¥:{' '}
                {post.created_at
                  ? format(new Date(post.created_at), 'yyyy/MM/dd')
                  : 'æ—¥ä»˜ä¸æ˜'}
              </Text>
            </View>
            <View>
              {profile && (
                <>
                  <Image
                    source={{ uri: profile.avatar_url }}
                  />
                  <Text>{profile.nickname}</Text>
                </>
              )}
            </View>
          </View>
          <View />
          {renderTagList('ğŸ¸', 'ãƒ‘ãƒ¼ãƒˆ', post.parts)}
          {renderTagList('ğŸ¼', 'ã‚¸ãƒ£ãƒ³ãƒ«', post.genres)}
          {renderTagList('ğŸ“…', 'æ´»å‹•æ›œæ—¥', post.activity_days)}
          {renderTagList('ğŸ“', 'æ–¹å‘æ€§', post.directions)}
          {renderTagList('ğŸ‘¥', 'å‹Ÿé›†æ€§åˆ¥', post.gender ? [post.gender] : [])}
          {renderAgeRange()}
          {renderTagList('ğŸ”—', 'URL', post.demo_url ? [post.demo_url] : [])}
          {renderBeginnerOk()}
          <View>
            <LikeButton to_user_id={post.user_id} />
            {currentUser.id === post.user_id && (
              <View>
                <TouchableOpacity onPress={() => setEditModal(true)}>
                  <Text>âœï¸ ç·¨é›†</Text>
                </TouchableOpacity>
                <TouchableOpacity onPress={handleDeletePost}>
                  <Text>ğŸ—‘ å‰Šé™¤</Text>
                </TouchableOpacity>
              </View>
            )}
          </View>
        </View>
        <CommentList to_user_id={post.user_id} />
      </ScrollView>
      <BackFAB />
      <UserMiniModal
        visible={miniModal}
        user={authorFull}
        onClose={() => setMiniModal(false)}
        onViewProfile={() => {
          setMiniModal(false);
          global.openProfileViewModal?.(authorFull);
        }}
        onChat={handleChat}
      />
      <SessionPostModal
        visible={editModal}
        mode="edit"
        initialData={post}
        onClose={() => setEditModal(false)}
        onPostCreated={() => setEditModal(false)}
      />
    </View>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\screens\SessionListScreen.js =====
import React, { useEffect, useState } from 'react';
import {
  View,
  Text,
  FlatList,
  TouchableOpacity,
} from 'react-native';
import { supabase } from '../api/supabaseClient';
import { format } from 'date-fns';
import SessionPostModal from '../modals/SessionPostModal';
import { useAuthStore } from '../store/useAuthStore';
import { useNavigation } from '@react-navigation/native';

export default function SessionListScreen() {
  const [posts, setPosts] = useState([]);
  const [showModal, setShowModal] = useState(false);
  const user = useAuthStore((state) => state.user);
  const navigation = useNavigation();

  useEffect(() => {
    fetchPosts();
  }, []);

  const fetchPosts = async () => {
    const { data } = await supabase
      .from('session_posts')
      .select('*')
      .order('created_at', { ascending: false });
    if (data) setPosts(data);
  };

  return (
    <View>
      <FlatList
        data={posts}
        keyExtractor={(item) => item.id}
        renderItem={({ item }) => (
          <TouchableOpacity
            onPress={() => navigation.navigate('SessionDetail', { post: item })}
          >
            <Text>{item.title}</Text>
            <Text>
              {item.region}ãƒ»{format(new Date(item.created_at), 'yyyy/M/d')}
            </Text>
          </TouchableOpacity>
        )}
      />
      <TouchableOpacity onPress={() => setShowModal(true)}>
        <Text>ï¼‹</Text>
      </TouchableOpacity>
      <SessionPostModal
        visible={showModal}
        onClose={() => setShowModal(false)}
        onPostCreated={fetchPosts}
      />
    </View>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\screens\SettingsScreen.js =====
import React, { useState, useEffect } from 'react';
import {
  View,
  Text,
  TouchableOpacity,
  Alert,
  ScrollView,
} from 'react-native';
import { useNavigation } from '@react-navigation/native';
import { useAuthStore } from '../store/useAuthStore';
import { supabase } from '../api/supabaseClient';
import OnboardingModal from '../modals/OnboardingModal';
import Button from '../components/ui/Button';
import SectionTitle from '../components/ui/SectionTitle';
import ProfileImage from '../components/ui/ProfileImage';

export default function SettingsScreen() {
  const navigation = useNavigation();
  const user = useAuthStore((state) => state.user);
  const [profile, setProfile] = useState(null);
  const [modalVisible, setModalVisible] = useState(false);
  const [editProfileData, setEditProfileData] = useState({});

  useEffect(() => {
    fetchProfile();
  }, []);

  const fetchProfile = async () => {
    const { data, error } = await supabase
      .from('users')
      .select('*')
      .eq('id', user.id)
      .single();
    if (error) {
      Alert.alert('ã‚¨ãƒ©ãƒ¼', 'ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
    } else {
      setProfile(data);
    }
  };

  const goToViewProfile = () => {
    if (profile) {
      global.openProfileViewModal(profile);
    }
  };

  const goToEditProfile = () => {
    if (profile) {
      setEditProfileData(profile);
      setModalVisible(true);
    }
  };

  const handleLogout = async () => {
    const { error } = await supabase.auth.signOut();
    if (error) {
      Alert.alert('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå¤±æ•—', error.message);
    } else {
      Alert.alert('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ');
    }
  };

  return (
    <ScrollView>
      <SectionTitle title="ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®š" />

      <OnboardingModal
        visible={modalVisible}
        onClose={async () => {
          setModalVisible(false);
          setTimeout(fetchProfile, 500);
        }}
        initialProfile={editProfileData}
        mode="edit"
      />

      <View>
        <ProfileImage uri={profile?.avatar_url} size={80} />
        <Text>{profile?.nickname || 'ãƒ¦ãƒ¼ã‚¶ãƒ¼'}</Text>
        <View>
          <Button
            title="ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç¢ºèª"
            onPress={goToViewProfile}
            type="ghost"
          />
          <Button
            title="ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å¤‰æ›´"
            onPress={goToEditProfile}
            type="ghost"
          />
        </View>
      </View>

      <Button title="åºƒå‘Šå‰Šé™¤ãƒ»ã‚µãƒãƒ¼ãƒˆ" />
      <Button title="ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒ»ãƒãƒªã‚·ãƒ¼" />
      <Button title="ğŸšª ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ" onPress={handleLogout} />
      <Button title="ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤" />
    </ScrollView>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\screens\SignInScreen.js =====
import React, { useState } from 'react';
import {
  View,
  Text,
  TextInput,
  Alert,
  TouchableOpacity,
  Animated,
} from 'react-native';
import { signIn } from '../api/auth';
import { useAuthStore } from '../store/useAuthStore';
import { supabase } from '../api/supabaseClient';
import Button from '../components/ui/Button';
import SectionTitle from '../components/ui/SectionTitle';

export default function SignInScreen({ navigation }) {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [fadeAnim] = useState(new Animated.Value(0));

  const handleLogin = async () => {
    const { data, error } = await signIn(email, password);
    if (error) {
      Alert.alert('ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—', error.message);
      return;
    }

    const user = data.user;
    if (!user) {
      Alert.alert('å¤±æ•—', 'ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒå–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ');
      return;
    }

    const isEmailConfirmed =
      user.email_confirmed || user.email_confirmed_at || false;

    if (!isEmailConfirmed) {
      Alert.alert(
        'ãƒ¡ãƒ¼ãƒ«æœªç¢ºèª',
        'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ç¢ºèªãŒå¿…è¦ã§ã™ã€‚ãƒ¡ãƒ¼ãƒ«ã‚’ã”ç¢ºèªãã ã•ã„ã€‚',
      );
      return;
    }

    useAuthStore.getState().setUser(user);

    const { data: existingUser, error: fetchError } = await supabase
      .from('users')
      .select('*')
      .eq('id', user.id)
      .single();

    if (fetchError) {
      const { error: insertError } = await supabase.from('users').upsert({
        id: user.id,
        email: user.email,
      });

      if (insertError) {
        Alert.alert('ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆå¤±æ•—', insertError.message);
        return;
      }

      navigation.replace('Main');
      return;
    }

    navigation.replace('Main');
  };

  React.useEffect(() => {
    Animated.timing(fadeAnim, {
      toValue: 1,
      duration: 500,
      useNativeDriver: true,
    }).start();
  }, []);

  return (
    <Animated.View style={{ opacity: fadeAnim }}>
      <SectionTitle title="ãƒ­ã‚°ã‚¤ãƒ³" />

      <Text>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</Text>
      <TextInput
        value={email}
        onChangeText={setEmail}
        autoCapitalize="none"
        placeholder="example@email.com"
      />

      <Text>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</Text>
      <TextInput
        value={password}
        onChangeText={setPassword}
        secureTextEntry
        placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
      />

      <Button title="ãƒ­ã‚°ã‚¤ãƒ³" onPress={handleLogin} />

      <TouchableOpacity onPress={() => navigation.navigate('SignUp')}>
        <Text>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ æ–°è¦ç™»éŒ²</Text>
      </TouchableOpacity>
    </Animated.View>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\screens\SignUpScreen.js =====
import React, { useState, useRef, useEffect } from 'react';
import {
  Text,
  TextInput,
  Alert,
  TouchableOpacity,
  Animated,
} from 'react-native';
import { signUp } from '../api/auth';
import { supabase } from '../api/supabaseClient';
import { useAuthStore } from '../store/useAuthStore';
import { useNavigation } from '@react-navigation/native';
import SectionTitle from '../components/ui/SectionTitle';
import Button from '../components/ui/Button';

export default function SignUpScreen() {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const navigation = useNavigation();
  const fadeAnim = useRef(new Animated.Value(0)).current;

  useEffect(() => {
    Animated.timing(fadeAnim, {
      toValue: 1,
      duration: 800,
      useNativeDriver: true,
    }).start();
  }, []);

  const handleSignUp = async () => {
    const { data, error } = await signUp(email, password);

    if (error) {
      if (error.message.includes('User already registered')) {
        Alert.alert(
          'ç™»éŒ²æ¸ˆã¿',
          'ã“ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯æ—¢ã«ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚',
        );
        navigation.replace('SignIn');
        return;
      }
      Alert.alert('ç™»éŒ²å¤±æ•—', error.message);
      return;
    }

    const user = data?.user;
    if (!user || !user.email_confirmed_at) {
      Alert.alert('ä»®ç™»éŒ²å®Œäº†', 'ç¢ºèªãƒ¡ãƒ¼ãƒ«ã‚’ã”ç¢ºèªãã ã•ã„ã€‚');
      navigation.replace('SignIn');
      return;
    }

    useAuthStore.getState().setUser(user);
    const { error: upsertError } = await supabase.from('users').upsert({
      id: user.id,
      email: user.email,
    });

    if (upsertError) {
      Alert.alert('ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä¿å­˜å¤±æ•—', upsertError.message);
    } else {
      Alert.alert('ã‚ˆã†ã“ãï¼', 'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒä½œæˆã•ã‚Œã¾ã—ãŸã€‚');
      navigation.replace('Main');
    }
  };

  return (
    <Animated.View style={{ opacity: fadeAnim }}>
      <SectionTitle title="æ–°è¦ç™»éŒ²" />

      <Text>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</Text>
      <TextInput
        value={email}
        onChangeText={setEmail}
        autoCapitalize="none"
        placeholder="email@example.com"
        keyboardType="email-address"
      />

      <Text>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</Text>
      <TextInput
        value={password}
        onChangeText={setPassword}
        secureTextEntry
        placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
      />

      <Button title="æ–°è¦ç™»éŒ²" onPress={handleSignUp} />

      <TouchableOpacity onPress={() => navigation.navigate('SignIn')}>
        <Text>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ã™ã‹ï¼Ÿ ãƒ­ã‚°ã‚¤ãƒ³</Text>
      </TouchableOpacity>
    </Animated.View>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\screens\StudioScreen.js =====
import React from 'react';
import { View, Text } from 'react-native';

export default function StudioScreen() {
  return (
    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>
      <Text>Studio</Text>
    </View>
  );
}


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\services\adService.js =====



===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\services\studioService.js =====



===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\services\twitterService.js =====



===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\store\useAuthStore.js =====
// src/store/useAuthStore.js
import { create } from 'zustand';

export const useAuthStore = create((set) => ({
  user: null,
  setUser: (user) => set({ user }),
  clearUser: () => set({ user: null }),
}));


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\styles\colors.js =====
// ì¼ë³¸ ë°´ë“œ/ìŒì•… ì»¤ë®¤ë‹ˆí‹° ê°ì„±, ì…ì²´ê°, ë°ê³  í™œê¸°ì°¬ ëŠë‚Œ ë°˜ì˜
export const COLORS = {
  primary: "#2463EB",         // ë©”ì¸ ë¸”ë£¨ (ì¼ë³¸ ìŒì•…ì•±ì— ìì£¼ ì‚¬ìš©)
  secondary: "#FFB300",       // í¬ì¸íŠ¸ ì˜ë¡œìš° (í™œê¸°ì°¬ ëŠë‚Œ)
  accent: "#F94F4F",          // ê°•ì¡° ë ˆë“œ (ì•Œë¦¼, ì—ëŸ¬, ì¢‹ì•„ìš”)
  background: "#F8FAFF",      // ë°ì€ ë°°ê²½ìƒ‰ (ì…ì²´ê° íš¨ê³¼ ë°°ê²½)
  surface: "#FFFFFF",         // ì¹´ë“œ/ì»¨í…ì¸  ë°°ê²½
  border: "#E3E9F5",          // ê²½ê³„ì„ /êµ¬ë¶„ì„ 
  shadow: "#CFD8DC",          // ê·¸ë¦¼ì
  text: "#24324B",            // ê¸°ë³¸ í…ìŠ¤íŠ¸
  textMuted: "#7B8CA3",       // ë³´ì¡° í…ìŠ¤íŠ¸
  inputBg: "#F4F7FC",         // ì…ë ¥ì°½ ë°°ê²½
  inputBorder: "#D3D9E3",     // ì…ë ¥ì°½ í…Œë‘ë¦¬
  success: "#22B573",         // ì„±ê³µ ë©”ì‹œì§€
  error: "#F94F4F",           // ì—ëŸ¬ ë©”ì‹œì§€
  like: "#F94F4F",            // ì¢‹ì•„ìš” ë²„íŠ¼
  tagBg: "#E6EEF7",           // íƒœê·¸/í…ìŠ¤íŠ¸ì¹© ë°°ê²½
  tagText: "#2463EB",         // íƒœê·¸ í…ìŠ¤íŠ¸
};


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\styles\common.js =====
import { StyleSheet } from "react-native";
import { COLORS } from "./colors";
import { FONTS } from "./fonts";
import { SPACING } from "./spacing";
import { METRICS } from "./metrics";

/**
 * ê³µí†µ ìŠ¤íƒ€ì¼: ë°´ë“œ ë§¤ì¹­ ì»¤ë®¤ë‹ˆí‹° / ì¼ë³¸ì¸ ì‚¬ìš©ì / ì…ì²´ê°
 * - ì¹´ë“œ, ë²„íŠ¼, ì…ë ¥ì°½, íƒœê·¸, FAB, ì½”ë©˜íŠ¸ ë“±
 * - ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ importí•´ì„œ ì‚¬ìš©
 */
export const commonStyles = StyleSheet.create({
  // ì»¨í…Œì´ë„ˆ
  container: {
    flex: 1,
    backgroundColor: COLORS.background,
    padding: SPACING.lg,
  },

  // ì¹´ë“œ
  card: {
    backgroundColor: COLORS.surface,
    borderRadius: METRICS.borderRadius,
    padding: SPACING.lg,
    marginVertical: SPACING.sm,
    ...METRICS.cardShadow,
  },

  // ì„¹ì…˜ íƒ€ì´í‹€
  sectionTitle: {
    fontSize: FONTS.size.lg,
    fontWeight: FONTS.weight.bold,
    color: COLORS.primary,
    marginBottom: SPACING.sm,
    letterSpacing: 1.2,
  },

  // ì¼ë°˜ ë¼ë²¨/í•„ë“œ íƒ€ì´í‹€
  label: {
    fontSize: FONTS.size.sm,
    color: COLORS.textMuted,
    marginBottom: SPACING.xs,
    fontWeight: FONTS.weight.medium,
  },

  // ì…ë ¥ì°½ (TextInput)
  input: {
    backgroundColor: COLORS.inputBg,
    borderColor: COLORS.inputBorder,
    borderWidth: 1,
    borderRadius: METRICS.inputRadius,
    paddingVertical: SPACING.sm,
    paddingHorizontal: SPACING.md,
    fontSize: FONTS.size.md,
    marginBottom: SPACING.md,
    color: COLORS.text,
  },

  // ë²„íŠ¼
  button: {
    backgroundColor: COLORS.primary,
    borderRadius: METRICS.buttonRadius,
    paddingVertical: SPACING.sm,
    paddingHorizontal: SPACING.xl,
    alignItems: "center",
    marginVertical: SPACING.sm,
    shadowColor: COLORS.shadow,
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.12,
    shadowRadius: 6,
    elevation: 3,
  },
  buttonText: {
    color: "#fff",
    fontWeight: FONTS.weight.bold,
    fontSize: FONTS.size.md,
    letterSpacing: 1.1,
  },
  buttonSelected: {
    backgroundColor: COLORS.secondary,
  },

  // FAB (Floating Action Button)
  fab: {
    position: 'absolute',
    bottom: SPACING.xl,
    left: SPACING.lg,
    backgroundColor: COLORS.primary,
    borderRadius: 24,
    paddingVertical: SPACING.sm,
    paddingHorizontal: SPACING.lg,
    elevation: 5,
    ...METRICS.cardShadow,
  },
  fabText: {
    color: "#fff",
    fontWeight: FONTS.weight.bold,
    fontSize: FONTS.size.md,
  },

  // ì²´í¬ë°•ìŠ¤ ê·¸ë£¹
  formGroup: {
    marginBottom: SPACING.md,
  },
  row: {
    flexDirection: "row",
    alignItems: "center",
    flexWrap: "wrap",
    marginBottom: SPACING.sm,
  },
  checkBox: {
    borderWidth: 1,
    borderColor: COLORS.inputBorder,
    backgroundColor: COLORS.inputBg,
    borderRadius: 16,
    paddingVertical: SPACING.xs,
    paddingHorizontal: SPACING.sm,
    marginRight: SPACING.xs,
    marginBottom: SPACING.xs,
  },
  checkBoxSelected: {
    backgroundColor: COLORS.primary,
    borderColor: COLORS.primary,
  },
  checkBoxText: {
    color: COLORS.textMuted,
    fontSize: FONTS.size.sm,
  },
  checkBoxTextSelected: {
    color: "#fff",
    fontWeight: FONTS.weight.bold,
  },

  // ë“œë¡­ë‹¤ìš´(Picker) ë˜í¼
  dropdownWrapper: {
    backgroundColor: COLORS.inputBg,
    borderRadius: METRICS.inputRadius,
    borderWidth: 1,
    borderColor: COLORS.inputBorder,
    marginBottom: SPACING.md,
    justifyContent: "center",
  },
  picker: {
    width: "100%",
    height: 40,
    color: COLORS.text,
  },

  // Like Button
  likeButton: {
    backgroundColor: COLORS.tagBg,
    borderRadius: 20,
    paddingHorizontal: SPACING.lg,
    paddingVertical: SPACING.xs,
    alignItems: "center",
    alignSelf: "flex-start",
    marginVertical: SPACING.xs,
  },
  likeButtonActive: {
    backgroundColor: COLORS.like,
  },
  likeButtonText: {
    color: COLORS.like,
    fontWeight: FONTS.weight.bold,
    fontSize: FONTS.size.md,
  },

  // ì½”ë©˜íŠ¸ ì•„ì´í…œ
  commentItem: {
    flexDirection: "row",
    alignItems: "flex-start",
    marginBottom: SPACING.md,
  },
  commentAvatar: {
    width: 36,
    height: 36,
    borderRadius: 18,
    marginRight: SPACING.sm,
    backgroundColor: COLORS.inputBg,
  },
  commentNickname: {
    fontWeight: FONTS.weight.bold,
    fontSize: FONTS.size.sm,
    color: COLORS.primary,
  },
  commentContent: {
    color: COLORS.text,
    marginVertical: 2,
    fontSize: FONTS.size.md,
  },
  commentDate: {
    fontSize: FONTS.size.xs,
    color: COLORS.textMuted,
  },

  // í”„ë¡œí•„ ì´ë¯¸ì§€
  profileImage: {
    backgroundColor: COLORS.surface,
    borderWidth: 2,
    borderColor: COLORS.primary,
    justifyContent: "center",
    alignItems: "center",
    marginRight: SPACING.sm,
  },
  profileImagePlaceholder: {
    color: COLORS.textMuted,
    fontSize: FONTS.size.md,
  },

  // í”„ë¡œí•„ ì•„ì´í…œ
  profileItem: {
    marginBottom: SPACING.md,
  },
  profileValueWrapper: {
    backgroundColor: COLORS.inputBg,
    borderRadius: METRICS.inputRadius,
    padding: SPACING.sm,
  },
  profileValue: {
    fontSize: FONTS.size.md,
    color: COLORS.text,
  },

  // íƒœê·¸ (ReadOnlyTagGroup ë“±)
  readOnlyTagGroup: {
    marginBottom: SPACING.sm,
  },
  tag: {
    backgroundColor: COLORS.tagBg,
    borderRadius: 16,
    paddingHorizontal: SPACING.sm,
    paddingVertical: SPACING.xs,
    marginRight: SPACING.xs,
    marginBottom: SPACING.xs,
    alignSelf: "flex-start",
  },
  tagText: {
    color: COLORS.tagText,
    fontSize: FONTS.size.sm,
  },

  // muted/ë³´ì¡° í…ìŠ¤íŠ¸
  textMuted: {
    color: COLORS.textMuted,
    fontSize: FONTS.size.sm,
  },

  // ì—ëŸ¬ í…ìŠ¤íŠ¸
  errorText: {
    color: COLORS.error,
    marginTop: SPACING.xs,
    fontSize: FONTS.size.sm,
  },
});


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\styles\fonts.js =====
// ì¼ë³¸ ì»¤ë®¤ë‹ˆí‹° ì•±ì—ì„œ ìì£¼ ì“°ëŠ” í°íŠ¸ì™€ ì‚¬ì´ì¦ˆ
export const FONTS = {
  family: {
    regular: "System",        // ê¸°ë³¸ RN í°íŠ¸, ì¼ë³¸ì–´ ì§€ì›
    bold: "System",           // í•„ìš”ì‹œ Noto Sans JP, Hiragino ë“± Web Font ì ìš©ë„ ê³ ë ¤
  },
  size: {
    xs: 12,
    sm: 14,
    md: 16,
    lg: 20,
    xl: 28,
    title: 32,                // ë©”ì¸ íƒ€ì´í‹€
  },
  weight: {
    regular: "400",
    medium: "500",
    bold: "700",
  },
};


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\styles\metrics.js =====


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\styles\spacing.js =====
// ì¼ë³¸ ì•± íŠ¹ìœ ì˜ ë„‰ë„‰í•œ ì—¬ë°±, ê°€ë…ì„± ê°•ì¡°
export const SPACING = {
  xxs: 4,
  xs: 8,
  sm: 12,
  md: 16,
  lg: 24,
  xl: 32,
  xxl: 48,
};


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\utils\formatter.js =====


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\utils\notifications.js =====
// src/utils/notifications.js
export const getNotificationMessage = (type, nickname = 'èª°ã‹') => {
  switch (type) {
    case 'like':
      return `${nickname}ã•ã‚“ãŒã‚ãªãŸã«ã€Œã„ã„ã­ã€ã—ã¾ã—ãŸï¼`;
    case 'comment':
      return `${nickname}ã•ã‚“ãŒã‚³ãƒ¡ãƒ³ãƒˆã‚’æ®‹ã—ã¾ã—ãŸ`;
    default:
      return 'æ–°ã—ã„é€šçŸ¥ãŒã‚ã‚Šã¾ã™';
  }
};


===== C:\Users\so0002\Downloads\tactless-yellow-tortillas\tactless-yellow-tortillas\src\utils\validate.js =====


